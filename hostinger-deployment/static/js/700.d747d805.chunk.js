"use strict";(self.webpackChunkaltus_loan_application_portal=self.webpackChunkaltus_loan_application_portal||[]).push([[700],{7700:(t,e,n)=>{n.d(e,{ConfirmationStep:()=>p});var i=n(5043),o=n(3969),s=n(5895),r=n(298),a=n(2097),l=n(172),c=n(3267);const u={};function d(t){var e,n,i,o,s;const r=(null===t||void 0===t||null===(e=t.customer)||void 0===e?void 0:e.nrc)||"",a=function(t){if(!t){const t=Math.random().toString(36).substring(2,8).toUpperCase();return"ALT".concat((new Date).getFullYear().toString().slice(-2)).concat(t)}const e=t.replace(/[^0-9]/g,"").slice(-4),n=Math.random().toString(36).substring(2,4).toUpperCase(),i=(new Date).getFullYear().toString().slice(-2),o=((new Date).getMonth()+1).toString().padStart(2,"0");return"ALT".concat(i).concat(o).concat(e).concat(n)}(r),l=(new Date).toISOString(),c=function(t){var e,n,i,o;const s=(null===t||void 0===t||null===(e=t.customer)||void 0===e?void 0:e.address)||(null===t||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.city)||(null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.nationality)||(null===t||void 0===t||null===(o=t.customer)||void 0===o?void 0:o.country)||"";if("string"!==typeof s)return"Lusaka, Zambia";const r=s.trim(),a=r.split(",").map(t=>t.trim()).filter(Boolean);return(a.length?a[a.length-1]:r)||"Lusaka, Zambia"}(t);return u[a]={id:a,created:l,statusTimeline:[{stage:"submitted",ts:l,description:"Application submitted successfully"},{stage:"review",ts:l,description:"Documents under review"}],currentStatus:"review",location:c,source:"web",customerName:"".concat((null===t||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.firstName)||""," ").concat((null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.lastName)||"").trim(),nrcNumber:r,loanAmount:(null===t||void 0===t||null===(o=t.loan)||void 0===o?void 0:o.amount)||0,loanProduct:(null===t||void 0===t||null===(s=t.loan)||void 0===s?void 0:s.productCode)||"Unknown"},Promise.resolve({referenceId:a,status:"review",location:c,message:"Application submitted successfully. You will be contacted within 24-48 hours."})}var m=n(579);const p=()=>{const{customer:t,loan:e,documents:n,resetAll:u}=(0,c.l)(),[p,v]=(0,i.useState)(!1),[h,b]=(0,i.useState)(null),[g,x]=(0,i.useState)(null);return window.__confirmationStepValidate=async()=>!0,(0,m.jsxs)(o.A,{children:[(0,m.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Confirmation"}),h?(0,m.jsxs)(o.A,{sx:{p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[(0,m.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Application Submitted"}),(0,m.jsxs)(s.A,{variant:"body2",children:["Reference ID: ",(0,m.jsx)("strong",{children:h.referenceId})]}),(0,m.jsxs)(s.A,{variant:"body2",sx:{mb:2},children:["Initial Status: ",(0,m.jsx)("strong",{children:h.status})]}),(0,m.jsx)(s.A,{variant:"caption",sx:{display:"block",mb:2},children:"Use the tracking page with this reference ID to check updates."}),(0,m.jsx)(r.A,{direction:"row",spacing:2,children:(0,m.jsx)(a.A,{variant:"outlined",onClick:()=>u(),children:"Start New Application"})})]}):(0,m.jsxs)(o.A,{children:[(0,m.jsx)(s.A,{variant:"body2",sx:{mb:2},children:"Click submit to send your application. A reference will be generated."}),(0,m.jsx)(r.A,{direction:"row",spacing:2,children:(0,m.jsx)(a.A,{variant:"contained",disabled:p,onClick:async()=>{v(!0),x(null);try{const i={customer:t,loan:e,documents:n.map(t=>({type:t.type,status:t.status})),submittedAt:(new Date).toISOString()},o=await d(i);b({referenceId:o.referenceId,status:o.status})}catch(i){x(i.message||"Submission failed")}finally{v(!1)}},children:p?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.A,{size:18,sx:{mr:1}})," Submitting..."]}):"Submit Application"})}),g&&(0,m.jsx)(s.A,{color:"error",sx:{mt:2},children:g}),(0,m.jsx)(s.A,{variant:"caption",sx:{display:"block",mt:3,color:"text.secondary"},children:"Using mock submission mode (no network call)."})]})]})}}}]);
//# sourceMappingURL=700.d747d805.chunk.js.map