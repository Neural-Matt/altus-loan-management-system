{"version":3,"file":"static/js/339.b48c766f.chunk.js","mappings":"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AAEzgB,MAAO,UAAW+P,MAAO,aACtC2Q,SAAU,CAAE1gB,MAAO,UAAW+P,MAAO,YACrC4Q,UAAW,CAAE3gB,MAAO,UAAW+P,MAAO,aACtC6Q,SAAU,CAAE5gB,MAAO,UAAW+P,MAAO,YACrC5C,MAAO,CAAEnN,MAAO,QAAS+P,MAAO,UAEjBwB,GACjB,OAAOhL,EAAAA,EAAAA,KAAC6Y,EAAAA,EAAI,CAACxQ,KAAK,QAAQ1N,QAAQ,WAAWlB,MAAO0P,EAAK1P,MAAO+P,MAAOL,EAAKK,Q,8DEhwBvE,MAAM3C,EAAmB,CAK9B,cACA,gBACA,mBACA,yCACA,eACA,SACA,SACA,UACA,gBACA,4BACA,oBACA,gBAGA,QACA,QACA,eACA,gBACA,WAGA,SACA,WACA,QACA,sBAGA,QACA,eACA,SAGA,UACA,iBAGA,UACA,WAGA,iBAeWyT,EAAgB,CAE3B,qBAAwB,CACtB,gCACA,WACA,QACA,QACA,gBACA,cACA,WACA,QACA,WACA,UACA,SACA,gBACA,kBACA,QACA,UACA,QACA,gBACA,gBACA,WACA,SACA,QACA,SAIF,qBAAwB,CACtB,cACA,aACA,WACA,SACA,cACA,WACA,SACA,SAIF,qBAAwB,CACtB,cACA,aACA,YACA,SACA,SACA,QACA,QACA,WAEF,qBAAwB,CACtB,cACA,WACA,YACA,UACA,sBACA,QACA,SACA,sBACA,sBACA,oBACA,oBACA,6BACA,uBAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,SACA,SAIF,qBAAwB,CACtB,cACA,uBACA,mBACA,oBACA,kBACA,yBACA,mBACA,WACA,oBACA,8BACA,SACA,YACA,UACA,mBACA,aACA,qCACA,YACA,gCACA,wBACA,qCACA,iBACA,wBACA,kBACA,yBACA,qCACA,sBACA,gBACA,sBACA,YACA,WACA,SACA,mBACA,cACA,UACA,QACA,QACA,UACA,QACA,QACA,SACA,gBACA,UACA,QACA,UACA,QACA,QACA,WACA,WACA,QACA,SACA,UACA,UACA,SACA,YACA,SACA,QAEF,qBAAwB,CACtB,iBACA,oBACA,gBACA,gBACA,sBACA,4BACA,yCACA,gBAIF,qBAAwB,CACtB,cACA,gBACA,mBACA,eACA,SACA,SACA,UACA,gBACA,QACA,SAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,mBACA,aACA,uBACA,cACA,qBACA,WACA,aACA,4BACA,cACA,YACA,qBACA,oBACA,gBACA,kBACA,qBACA,+BACA,WACA,cACA,aACA,QACA,YACA,QACA,iBACA,QACA,cACA,mBACA,WACA,WACA,WACA,QACA,cACA,UACA,QACA,SACA,UACA,YACA,YAEF,IAAO,CACL,mBACA,aACA,uBACA,cACA,qBACA,WACA,aACA,4BACA,cACA,YACA,qBACA,oBACA,gBACA,kBACA,qBACA,+BACA,WACA,cACA,aACA,QACA,YACA,QACA,iBACA,QACA,cACA,mBACA,WACA,WACA,WACA,QACA,cACA,UACA,QACA,SACA,UACA,YACA,YAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,gBAIF,qBAAwB,CACtB,QACA,UACA,iBACA,YACA,WACA,UACA,QACA,UACA,QACA,SACA,SACA,SACA,UACA,YACA,QACA,cACA,WACA,UACA,aACA,SACA,gBACA,kBACA,qBACA,gBACA,kBACA,UACA,QACA,QACA,QACA,YACA,UACA,SACA,SACA,YACA,QACA,UACA,UACA,UACA,cACA,gBAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAEF,eAAgB,CACd,UAEF,QAAW,CACT,UAIF,qBAAwB,CACtB,UAEF,qBAAsB,CACpB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,UAIF,qBAAwB,CACtB,cACA,qBACA,QACA,QACA,cACA,SACA,WAIF,qBAAwB,CACtB,0BAIF,qBAAwB,CACtB,uBAiBSC,EAAe,CAC1B,gCAAiC,CAC/B,cACA,0CAGF,oCAAqC,CACnC,gBACA,mBACA,eACA,SACA,SACA,UACA,gBACA,4BACA,oBACA,iBAGF,sBAAuB,CACrB,QACA,QACA,eACA,gBACA,YAGF,oBAAqB,CACnB,SACA,WACA,QACA,uBAGF,mBAAoB,CAClB,QACA,eACA,UAGF,mBAAoB,CAClB,UACA,kBAGF,yBAA0B,CACxB,UACA,YAGF,mBAAoB,CAClB,kBAWSC,EAAkBC,IAC7B,IAAK,MAAOC,EAAOC,KAAatf,OAAOC,QAAQif,GAC7C,GAAKI,EAA+BzS,SAASuS,GAC3C,OAAOC,EAGX,OAAO,MAMIhU,EAAiB+T,GACrB5T,EAAiBqB,SAASuS,GAMtBG,EAAsBC,GAC1BP,EAAcO,IAAuBhU,C","sources":["../node_modules/@mui/material/esm/LinearProgress/linearProgressClasses.js","../node_modules/@mui/material/esm/LinearProgress/LinearProgress.js","../node_modules/@mui/icons-material/esm/UploadFile.js","hooks/useUATWorkflow.ts","utils/docValidation.ts","utils/payslipMerger.ts","components/wizard/steps/DocumentsStep.tsx","utils/nrcMerger.ts","constants/bankBranches.ts"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getLinearProgressUtilityClass(slot) {\n  return generateUtilityClass('MuiLinearProgress', slot);\n}\nconst linearProgressClasses = generateUtilityClasses('MuiLinearProgress', ['root', 'colorPrimary', 'colorSecondary', 'determinate', 'indeterminate', 'buffer', 'query', 'dashed', 'dashedColorPrimary', 'dashedColorSecondary', 'bar', 'bar1', 'bar2', 'barColorPrimary', 'barColorSecondary', 'bar1Indeterminate', 'bar1Determinate', 'bar1Buffer', 'bar2Indeterminate', 'bar2Buffer']);\nexport default linearProgressClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { useRtl } from '@mui/system/RtlProvider';\nimport { keyframes, css, styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport { getLinearProgressUtilityClass } from \"./linearProgressClasses.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst TRANSITION_DURATION = 4; // seconds\nconst indeterminate1Keyframe = keyframes`\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n`;\n\n// This implementation is for supporting both Styled-components v4+ and Pigment CSS.\n// A global animation has to be created here for Styled-components v4+ (https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#12).\n// which can be done by checking typeof indeterminate1Keyframe !== 'string' (at runtime, Pigment CSS transform keyframes`` to a string).\nconst indeterminate1Animation = typeof indeterminate1Keyframe !== 'string' ? css`\n        animation: ${indeterminate1Keyframe} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n      ` : null;\nconst indeterminate2Keyframe = keyframes`\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n`;\nconst indeterminate2Animation = typeof indeterminate2Keyframe !== 'string' ? css`\n        animation: ${indeterminate2Keyframe} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n      ` : null;\nconst bufferKeyframe = keyframes`\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n`;\nconst bufferAnimation = typeof bufferKeyframe !== 'string' ? css`\n        animation: ${bufferKeyframe} 3s infinite linear;\n      ` : null;\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    variant,\n    color\n  } = ownerState;\n  const slots = {\n    root: ['root', `color${capitalize(color)}`, variant],\n    dashed: ['dashed', `dashedColor${capitalize(color)}`],\n    bar1: ['bar', 'bar1', `barColor${capitalize(color)}`, (variant === 'indeterminate' || variant === 'query') && 'bar1Indeterminate', variant === 'determinate' && 'bar1Determinate', variant === 'buffer' && 'bar1Buffer'],\n    bar2: ['bar', 'bar2', variant !== 'buffer' && `barColor${capitalize(color)}`, variant === 'buffer' && `color${capitalize(color)}`, (variant === 'indeterminate' || variant === 'query') && 'bar2Indeterminate', variant === 'buffer' && 'bar2Buffer']\n  };\n  return composeClasses(slots, getLinearProgressUtilityClass, classes);\n};\nconst getColorShade = (theme, color) => {\n  if (theme.vars) {\n    return theme.vars.palette.LinearProgress[`${color}Bg`];\n  }\n  return theme.palette.mode === 'light' ? theme.lighten(theme.palette[color].main, 0.62) : theme.darken(theme.palette[color].main, 0.5);\n};\nconst LinearProgressRoot = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, styles[`color${capitalize(ownerState.color)}`], styles[ownerState.variant]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  position: 'relative',\n  overflow: 'hidden',\n  display: 'block',\n  height: 4,\n  // Fix Safari's bug during composition of different paint.\n  zIndex: 0,\n  '@media print': {\n    colorAdjust: 'exact'\n  },\n  variants: [...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      backgroundColor: getColorShade(theme, color)\n    }\n  })), {\n    props: ({\n      ownerState\n    }) => ownerState.color === 'inherit' && ownerState.variant !== 'buffer',\n    style: {\n      '&::before': {\n        content: '\"\"',\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'currentColor',\n        opacity: 0.3\n      }\n    }\n  }, {\n    props: {\n      variant: 'buffer'\n    },\n    style: {\n      backgroundColor: 'transparent'\n    }\n  }, {\n    props: {\n      variant: 'query'\n    },\n    style: {\n      transform: 'rotate(180deg)'\n    }\n  }]\n})));\nconst LinearProgressDashed = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Dashed',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.dashed, styles[`dashedColor${capitalize(ownerState.color)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  position: 'absolute',\n  marginTop: 0,\n  height: '100%',\n  width: '100%',\n  backgroundSize: '10px 10px',\n  backgroundPosition: '0 -23px',\n  variants: [{\n    props: {\n      color: 'inherit'\n    },\n    style: {\n      opacity: 0.3,\n      backgroundImage: `radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)`\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => {\n    const backgroundColor = getColorShade(theme, color);\n    return {\n      props: {\n        color\n      },\n      style: {\n        backgroundImage: `radial-gradient(${backgroundColor} 0%, ${backgroundColor} 16%, transparent 42%)`\n      }\n    };\n  })]\n})), bufferAnimation || {\n  // At runtime for Pigment CSS, `bufferAnimation` will be null and the generated keyframe will be used.\n  animation: `${bufferKeyframe} 3s infinite linear`\n});\nconst LinearProgressBar1 = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Bar1',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.bar, styles.bar1, styles[`barColor${capitalize(ownerState.color)}`], (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && styles.bar1Indeterminate, ownerState.variant === 'determinate' && styles.bar1Determinate, ownerState.variant === 'buffer' && styles.bar1Buffer];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  width: '100%',\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  top: 0,\n  transition: 'transform 0.2s linear',\n  transformOrigin: 'left',\n  variants: [{\n    props: {\n      color: 'inherit'\n    },\n    style: {\n      backgroundColor: 'currentColor'\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      backgroundColor: (theme.vars || theme).palette[color].main\n    }\n  })), {\n    props: {\n      variant: 'determinate'\n    },\n    style: {\n      transition: `transform .${TRANSITION_DURATION}s linear`\n    }\n  }, {\n    props: {\n      variant: 'buffer'\n    },\n    style: {\n      zIndex: 1,\n      transition: `transform .${TRANSITION_DURATION}s linear`\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.variant === 'indeterminate' || ownerState.variant === 'query',\n    style: {\n      width: 'auto'\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.variant === 'indeterminate' || ownerState.variant === 'query',\n    style: indeterminate1Animation || {\n      animation: `${indeterminate1Keyframe} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`\n    }\n  }]\n})));\nconst LinearProgressBar2 = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Bar2',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.bar, styles.bar2, styles[`barColor${capitalize(ownerState.color)}`], (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && styles.bar2Indeterminate, ownerState.variant === 'buffer' && styles.bar2Buffer];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  width: '100%',\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  top: 0,\n  transition: 'transform 0.2s linear',\n  transformOrigin: 'left',\n  variants: [...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      '--LinearProgressBar2-barColor': (theme.vars || theme).palette[color].main\n    }\n  })), {\n    props: ({\n      ownerState\n    }) => ownerState.variant !== 'buffer' && ownerState.color !== 'inherit',\n    style: {\n      backgroundColor: 'var(--LinearProgressBar2-barColor, currentColor)'\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.variant !== 'buffer' && ownerState.color === 'inherit',\n    style: {\n      backgroundColor: 'currentColor'\n    }\n  }, {\n    props: {\n      color: 'inherit'\n    },\n    style: {\n      opacity: 0.3\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color,\n      variant: 'buffer'\n    },\n    style: {\n      backgroundColor: getColorShade(theme, color),\n      transition: `transform .${TRANSITION_DURATION}s linear`\n    }\n  })), {\n    props: ({\n      ownerState\n    }) => ownerState.variant === 'indeterminate' || ownerState.variant === 'query',\n    style: {\n      width: 'auto'\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.variant === 'indeterminate' || ownerState.variant === 'query',\n    style: indeterminate2Animation || {\n      animation: `${indeterminate2Keyframe} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`\n    }\n  }]\n})));\n\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\nconst LinearProgress = /*#__PURE__*/React.forwardRef(function LinearProgress(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiLinearProgress'\n  });\n  const {\n    className,\n    color = 'primary',\n    value,\n    valueBuffer,\n    variant = 'indeterminate',\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    color,\n    variant\n  };\n  const classes = useUtilityClasses(ownerState);\n  const isRtl = useRtl();\n  const rootProps = {};\n  const inlineStyles = {\n    bar1: {},\n    bar2: {}\n  };\n  if (variant === 'determinate' || variant === 'buffer') {\n    if (value !== undefined) {\n      rootProps['aria-valuenow'] = Math.round(value);\n      rootProps['aria-valuemin'] = 0;\n      rootProps['aria-valuemax'] = 100;\n      let transform = value - 100;\n      if (isRtl) {\n        transform = -transform;\n      }\n      inlineStyles.bar1.transform = `translateX(${transform}%)`;\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('MUI: You need to provide a value prop ' + 'when using the determinate or buffer variant of LinearProgress .');\n    }\n  }\n  if (variant === 'buffer') {\n    if (valueBuffer !== undefined) {\n      let transform = (valueBuffer || 0) - 100;\n      if (isRtl) {\n        transform = -transform;\n      }\n      inlineStyles.bar2.transform = `translateX(${transform}%)`;\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('MUI: You need to provide a valueBuffer prop ' + 'when using the buffer variant of LinearProgress.');\n    }\n  }\n  return /*#__PURE__*/_jsxs(LinearProgressRoot, {\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    role: \"progressbar\",\n    ...rootProps,\n    ref: ref,\n    ...other,\n    children: [variant === 'buffer' ? /*#__PURE__*/_jsx(LinearProgressDashed, {\n      className: classes.dashed,\n      ownerState: ownerState\n    }) : null, /*#__PURE__*/_jsx(LinearProgressBar1, {\n      className: classes.bar1,\n      ownerState: ownerState,\n      style: inlineStyles.bar1\n    }), variant === 'determinate' ? null : /*#__PURE__*/_jsx(LinearProgressBar2, {\n      className: classes.bar2,\n      ownerState: ownerState,\n      style: inlineStyles.bar2\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? LinearProgress.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['inherit', 'primary', 'secondary']), PropTypes.string]),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the progress indicator for the determinate and buffer variants.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n  /**\n   * The value for the buffer variant.\n   * Value between 0 and 100.\n   */\n  valueBuffer: PropTypes.number,\n  /**\n   * The variant to use.\n   * Use indeterminate or query when there is no progress value.\n   * @default 'indeterminate'\n   */\n  variant: PropTypes.oneOf(['buffer', 'determinate', 'indeterminate', 'query'])\n} : void 0;\nexport default LinearProgress;","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z\"\n}), 'UploadFile');","/**\n * UAT API Workflow Integration\n * Handles the proper sequence: Customer  Loan Request  Document Upload\n */\n\nimport { useCallback } from 'react';\nimport altusApi from '../api/altusApi';\nimport { useWizardData } from '../components/wizard/WizardDataContext';\nimport { useAltus } from '../context/AltusContext';\nimport { getDefaultBranchForProvince, isValidBranchName, getBranchByPartialMatch } from '../constants/branchConstants';\nimport { allValidBranches, isValidBranch } from '../constants/bankBranches';\n\n// UAT API Response Types\ninterface UATResponse<T> {\n  executionStatus: 'Success' | 'Failure';\n  executionMessage: string;\n  instanceId: string;\n  outParams: T;\n  gridParams: any;\n  docParams: any;\n}\n\ninterface LoanRequestResponse {\n  ApplicationNumber: string;\n}\n\ninterface DocumentUploadResponse {\n  LRDocumentDetailsId: string;\n}\n\nexport interface LoanApplicationWorkflow {\n  customer: any;\n  loanRequest: any;\n  applicationNumber?: string;\n}\n\nexport const useUATWorkflow = () => {\n  const { customer, loan, setLoan } = useWizardData();\n  const { state } = useAltus();\n\n  const submitLoanApplication = useCallback(async (): Promise<string> => {\n    console.log(' Starting UAT Loan Application Workflow...');\n\n    // Check if customer was created (optional now)\n    const customerId = customer.customerId || state.currentCustomer?.customerId;\n    \n    // Allow proceeding without customer creation - use form data directly\n    if (!customerId) {\n      console.log(' No CustomerID found - proceeding with form data only (TypeOfCustomer: New)');\n    } else {\n      console.log(' Customer ID available:', customerId);\n    }\n\n    // Validate required customer data from form\n    if (!customer.firstName || !customer.lastName) {\n      throw new Error('Please complete Step 1: Customer Information (fill in your name and basic details) before uploading documents.');\n    }\n\n    if (!customer.nrc || !customer.phone || !customer.email) {\n      throw new Error('Please complete Step 1: Customer Information (fill in NRC, phone, and email) before uploading documents.');\n    }\n\n    // Validate loan amount is provided\n    if (!loan.amount || loan.amount <= 0) {\n      throw new Error('Please complete Step 2: Loan Calculator and specify a loan amount before uploading documents.');\n    }\n\n    // Step 2: Submit loan request to get ApplicationNumber\n    // Using TypeOfCustomer \"New\" with all customer details from form\n    // This allows creating loan application even without prior customer creation\n    const loanRequestData = {\n      TypeOfCustomer: \"New\",\n      customerId: customerId || \"\", // Empty if no customer created yet\n      \n      // Personal details for New customer (from form data)\n      firstName: customer.firstName || \"\",\n      middleName: \"\",\n      lastName: customer.lastName || \"\",\n      dateOfBirth: customer.dateOfBirth || \"\",\n      \n      // Identity and contact details\n      identityNo: customer.nrc || \"\",\n      contactNo: customer.phone || \"\",\n      emailId: customer.email || \"\",\n      \n      // Address Information\n      primaryAddress: customer.address || \"\",\n      provinceName: (customer.province || \"\").replace(\" Province\", \"\"), // Normalize province name\n      districtName: customer.city || \"\",\n      countryName: \"Zambia\",\n      postalcode: customer.postalCode || \"\",\n      \n      // Employment details\n      employeeNumber: customer.payrollNumber || customer.employerId || \"\",\n      designation: customer.occupation || \"\",\n      employerName: customer.employerName || \"\",\n      employmentType: customer.employmentType || \"Permanent\",\n      \n      // Loan details\n      tenure: loan.tenureMonths || 12,\n      loanAmount: loan.amount,\n      grossIncome: customer.salary || 0,\n      netIncome: customer.salary ? customer.salary * 0.85 : 0,\n      deductions: customer.salary ? customer.salary * 0.15 : 0,\n      gender: customer.gender || 'Male',\n      \n      // Bank Details\n      financialInstitutionName: customer.bankName || \"\",\n      financialInstitutionBranchName: (() => {\n        // Ensure branch is a valid ALTUS API branch name\n        const providedBranch = customer.bankBranch?.trim() || \"\";\n        \n        console.log(' Bank Branch Validation:', { providedBranch, isValid: isValidBranchName(providedBranch) });\n        \n        // If valid, use as-is\n        if (isValidBranchName(providedBranch)) {\n          console.log(' Using provided branch:', providedBranch);\n          return providedBranch;\n        }\n        \n        // Try to find matching branch by partial name\n        const matchedBranch = getBranchByPartialMatch(providedBranch);\n        if (matchedBranch) {\n          console.log(` Mapped \"${providedBranch}\" to valid branch: \"${matchedBranch}\"`);\n          return matchedBranch;\n        }\n        \n        // Fall back to province-based default\n        const defaultBranch = getDefaultBranchForProvince(customer.province || \"\");\n        console.log(` Using default branch for province \"${customer.province}\": \"${defaultBranch}\"`);\n        return defaultBranch;\n      })(),\n      accountNumber: customer.accountNumber || \"\",\n      accountType: customer.accountType || \"\",\n      \n      // Reference/Referrer Details\n      referrerName: customer.reference?.name || \"\",\n      referrerNRC: customer.reference?.nrc || \"\",\n      referrerContactNo: customer.reference?.phone || \"\",\n      referrerPhysicalAddress: customer.reference?.address || \"\",\n      referrerRelationType: customer.reference?.relationship || \"\",\n      \n      // Next of Kin Details\n      kinName: customer.nextOfKin ? `${customer.nextOfKin.firstName || ''} ${customer.nextOfKin.lastName || ''}`.trim() : \"\",\n      kinNRC: customer.nextOfKin?.nrc || \"\",\n      kinRelationship: customer.nextOfKin?.relationship || \"\",\n      kinMobileNo: customer.nextOfKin?.phone || \"\",\n      kinAddress: customer.nextOfKin?.address || \"\",\n      kinProvinceName: (customer.nextOfKin?.province || \"\").replace(\" Province\", \"\"), // Normalize province name\n      kinDistrictName: customer.nextOfKin?.city || \"\",\n      kinCountryName: \"Zambia\"\n    };\n\n    console.log(' Submitting loan request...', {\n      customerId: customerId || '(none - using form data)',\n      identityNo: loanRequestData.identityNo,\n      loanAmount: loanRequestData.loanAmount,\n      tenure: loanRequestData.tenure,\n      bankName: loanRequestData.financialInstitutionName,\n      bankBranch: loanRequestData.financialInstitutionBranchName,\n      hasPersonalDetails: true,\n      hasAddressDetails: !!(loanRequestData.primaryAddress && loanRequestData.provinceName),\n      hasBankDetails: !!(loanRequestData.financialInstitutionName && loanRequestData.accountNumber),\n      hasNextOfKin: !!loanRequestData.kinName,\n      hasReference: !!loanRequestData.referrerName\n    });\n    \n    // ============================================================================\n    // CRITICAL VALIDATION GUARD - Validate branch name against ALTUS 37 branches\n    // ============================================================================\n    console.log(' Final branch being sent to ALTUS ', loanRequestData.financialInstitutionBranchName);\n    \n    if (!isValidBranch(loanRequestData.financialInstitutionBranchName)) {\n      const errorMessage = ` Invalid branch selected: \"${loanRequestData.financialInstitutionBranchName}\". Must be one of the 37 exact ALTUS branch names.`;\n      console.error(errorMessage);\n      console.error(' Valid branches:', allValidBranches);\n      throw new Error(\n        `Invalid branch name: \"${loanRequestData.financialInstitutionBranchName}\". ` +\n        `ALTUS only accepts these exact branch names: ${allValidBranches.slice(0, 5).join(', ')}... (37 total). ` +\n        `Please select a valid branch from the dropdown.`\n      );\n    }\n    \n    console.log(' Branch validation passed:', loanRequestData.financialInstitutionBranchName);\n    \n    const loanResult = await altusApi.submitLoanRequest(loanRequestData) as UATResponse<LoanRequestResponse>;\n    \n    console.log(' Full Loan Request Response:', loanResult);\n    \n    if (loanResult.executionStatus !== 'Success' || !loanResult.outParams?.ApplicationNumber) {\n      console.error(' Loan request failed:', loanResult);\n      throw new Error(`Loan request failed: ${loanResult.executionMessage || 'No ApplicationNumber returned'}`);\n    }\n\n    const applicationNumber = loanResult.outParams.ApplicationNumber;\n    console.log(' Loan request submitted. ApplicationNumber:', applicationNumber);\n    console.log(' Note: Backend requires manual approval before ApplicationNumber becomes active for document uploads');\n    console.log(' Documents will be stored locally and uploaded automatically after approval');\n\n    // Save applicationNumber to wizard context\n    setLoan({\n      ...loan,\n      applicationNumber,\n      applicationId: applicationNumber // Alias for easier access\n    });\n\n    return applicationNumber;\n  }, [customer, loan, state]);\n\n  const uploadDocument = useCallback(async (\n    applicationNumber: string, \n    documentType: string, \n    file: File\n  ): Promise<string> => {\n    console.log(' Uploading document...', { applicationNumber, documentType, fileName: file.name });\n    \n    const result = await altusApi.uploadLoanDocument(applicationNumber, documentType, file) as UATResponse<DocumentUploadResponse>;\n    \n    if (result.executionStatus !== 'Success' || !result.outParams?.LRDocumentDetailsId) {\n      throw new Error(`Document upload failed: ${result.executionMessage}`);\n    }\n\n    console.log(' Document uploaded. Document ID:', result.outParams.LRDocumentDetailsId);\n    return result.outParams.LRDocumentDetailsId;\n  }, []);\n\n  return {\n    submitLoanApplication,\n    uploadDocument,\n    isCustomerReady: !!(customer.customerId || state.currentCustomer?.customerId)\n  };\n};\n\nexport default useUATWorkflow;","// Document pre-validation & hashing utilities\n// These are client-side safeguards; server-side validation should re-check everything.\n\nexport const ALLOWED_MIME = ['application/pdf', 'image/png', 'image/jpeg'];\nexport const MAX_BYTES = 5 * 1024 * 1024; // 5MB limit (adjust as needed)\n\nexport interface PreCheckMeta {\n  mimeType: string;\n  sizeBytes: number;\n  checksum: string;\n}\n\nexport interface PreCheckResult {\n  ok: boolean;\n  error?: string;\n  meta?: PreCheckMeta;\n}\n\nexport async function computeSha256(file: File): Promise<string> {\n  const buf = await file.arrayBuffer();\n  const digest = await crypto.subtle.digest('SHA-256', buf);\n  return Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2,'0')).join('');\n}\n\nexport async function preValidateFile(file: File): Promise<PreCheckResult> {\n  if (!ALLOWED_MIME.includes(file.type)) {\n    return { ok: false, error: 'Unsupported file type' };\n  }\n  if (file.size > MAX_BYTES) {\n    return { ok: false, error: 'File exceeds 5MB size limit' };\n  }\n  const checksum = await computeSha256(file);\n  return {\n    ok: true,\n    meta: { mimeType: file.type, sizeBytes: file.size, checksum }\n  };\n}\n\nexport interface OcrResult { snippet: string; fullText?: string; detectedNrc?: string | null; }\n\n// Simple NRC pattern (adjust as needed)  alphanumeric or slash characters 6-12 length.\nconst NRC_REGEX = /[A-Z0-9/]{6,12}/i;\n\nexport async function attemptOcr(file: File): Promise<OcrResult | null> {\n  // Check if file is valid for OCR processing\n  if (!(file.type.startsWith('image/') || file.type === 'application/pdf')) {\n    console.warn('File type not supported for OCR:', file.type);\n    return null;\n  }\n  \n  // Check file size (avoid processing very large files)\n  if (file.size > 10 * 1024 * 1024) { // 10MB limit\n    console.warn('File too large for OCR processing:', file.size);\n    return null;\n  }\n  \n  // Check if file is actually readable\n  if (!file.size || file.size === 0) {\n    console.warn('File is empty or unreadable');\n    return null;\n  }\n  \n  let worker = null;\n  try {\n    const { createWorker } = await import('tesseract.js');\n    \n    // Create a worker with better error handling\n    worker = await createWorker('eng');\n    \n    // Validate that the file can be read as an image\n    const url = URL.createObjectURL(file);\n    const img = new Image();\n    \n    await new Promise((resolve, reject) => {\n      img.onload = resolve;\n      img.onerror = () => reject(new Error('Invalid image file'));\n      img.src = url;\n    });\n    \n    URL.revokeObjectURL(url);\n    \n    // Perform OCR with timeout\n    const { data } = await Promise.race([\n      worker.recognize(file),\n      new Promise((_, reject) => \n        setTimeout(() => reject(new Error('OCR timeout')), 30000) // 30 second timeout\n      )\n    ]) as any;\n    \n    const fullText: string = data.text || '';\n    const snippet = fullText.trim().slice(0, 160);\n    const match = fullText.match(NRC_REGEX);\n    \n    return { snippet, fullText, detectedNrc: match ? match[0] : null };\n  } catch (e) {\n    console.warn('OCR failed:', e instanceof Error ? e.message : 'Unknown error');\n    return null;\n  } finally {\n    // Ensure worker is always terminated\n    if (worker) {\n      try {\n        await worker.terminate();\n      } catch (terminateError) {\n        console.warn('Failed to terminate OCR worker:', terminateError);\n      }\n    }\n  }\n}\n","// Utility for merging payslip documents into a single PDF\nimport { jsPDF } from 'jspdf';\n\nexport const mergePayslips = async (payslip1: File, payslip2: File, payslip3: File, clientNRC: string): Promise<File> => {\n  const pdf = new jsPDF();\n  let pageAdded = false;\n\n  const addFileToPDF = async (file: File, pageNumber: number) => {\n    return new Promise<void>((resolve, reject) => {\n      const reader = new FileReader();\n      \n      reader.onload = async (e) => {\n        try {\n          const result = e.target?.result;\n          \n          if (file.type === 'application/pdf') {\n            // For PDF files, we'll add a text placeholder since direct PDF merging\n            // requires more complex libraries. In production, use pdf-lib or similar.\n            if (pageAdded) pdf.addPage();\n            pdf.setFontSize(16);\n            pdf.text(`Payslip ${pageNumber}`, 20, 30);\n            pdf.setFontSize(10);\n            pdf.text(`Original file: ${file.name}`, 20, 50);\n            pdf.text(`File size: ${Math.round(file.size / 1024)} KB`, 20, 60);\n            pdf.text(`Note: PDF content preserved in original file`, 20, 70);\n            pageAdded = true;\n            resolve();\n          } else if (file.type.startsWith('image/')) {\n            // For image files, add them directly to the PDF with compression\n            if (pageAdded) pdf.addPage();\n            \n            const img = new Image();\n            img.onload = () => {\n              try {\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                if (!ctx) throw new Error('Canvas context not available');\n                \n                // Calculate dimensions to fit page\n                const pageWidth = 190; // A4 width minus margins\n                const pageHeight = 270; // A4 height minus margins\n                const imgRatio = img.width / img.height;\n                const pageRatio = pageWidth / pageHeight;\n                \n                let pdfWidth, pdfHeight;\n                if (imgRatio > pageRatio) {\n                  pdfWidth = pageWidth;\n                  pdfHeight = pageWidth / imgRatio;\n                } else {\n                  pdfHeight = pageHeight;\n                  pdfWidth = pageHeight * imgRatio;\n                }\n                \n                // Optimize canvas size - use max 1200px width for compression\n                const maxWidth = 1200;\n                const maxHeight = 1200;\n                let canvasWidth = img.width;\n                let canvasHeight = img.height;\n                \n                if (canvasWidth > maxWidth || canvasHeight > maxHeight) {\n                  const scale = Math.min(maxWidth / canvasWidth, maxHeight / canvasHeight);\n                  canvasWidth = Math.floor(canvasWidth * scale);\n                  canvasHeight = Math.floor(canvasHeight * scale);\n                }\n                \n                // Set canvas to optimized size\n                canvas.width = canvasWidth;\n                canvas.height = canvasHeight;\n                \n                // Draw scaled image\n                ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);\n                \n                // Convert to JPEG with compression (0.7 quality)\n                const dataUrl = canvas.toDataURL('image/jpeg', 0.7);\n                pdf.addImage(dataUrl, 'JPEG', 10, 10, pdfWidth, pdfHeight);\n                pdf.setFontSize(8);\n                pdf.text(`Payslip ${pageNumber}`, 10, pdfHeight + 20);\n                \n                pageAdded = true;\n                resolve();\n              } catch (error) {\n                reject(error);\n              }\n            };\n            img.onerror = () => reject(new Error('Failed to load image'));\n            img.src = result as string;\n          } else {\n            // For other file types, add metadata\n            if (pageAdded) pdf.addPage();\n            pdf.setFontSize(16);\n            pdf.text(`Payslip ${pageNumber}`, 20, 30);\n            pdf.setFontSize(10);\n            pdf.text(`Original file: ${file.name}`, 20, 50);\n            pdf.text(`File type: ${file.type}`, 20, 60);\n            pdf.text(`File size: ${Math.round(file.size / 1024)} KB`, 20, 70);\n            pdf.text(`Note: Original file content preserved`, 20, 80);\n            pageAdded = true;\n            resolve();\n          }\n        } catch (error) {\n          reject(error);\n        }\n      };\n      \n      reader.onerror = () => reject(new Error('Failed to read file'));\n      \n      if (file.type.startsWith('image/')) {\n        reader.readAsDataURL(file);\n      } else {\n        reader.readAsArrayBuffer(file);\n      }\n    });\n  };\n\n  try {\n    // Add title page\n    pdf.setFontSize(20);\n    pdf.text('Combined Payslips', 20, 30);\n    pdf.setFontSize(12);\n    pdf.text(`Client NRC: ${clientNRC}`, 20, 50);\n    pdf.text(`Generated: ${new Date().toLocaleString()}`, 20, 60);\n    pdf.setFontSize(10);\n    pdf.text('This document contains three consecutive payslips:', 20, 80);\n    pdf.text('1. Oldest payslip', 30, 90);\n    pdf.text('2. Middle payslip', 30, 100);\n    pdf.text('3. Most recent payslip', 30, 110);\n    pageAdded = true;\n\n    // Add each payslip\n    await addFileToPDF(payslip1, 1);\n    await addFileToPDF(payslip2, 2);\n    await addFileToPDF(payslip3, 3);\n\n    // Generate the merged PDF\n    const pdfBlob = pdf.output('blob');\n    const sanitizedNRC = clientNRC.replace(/[^\\w]/g, '');\n    const mergedFile = new File([pdfBlob], `Combined_Payslips_${sanitizedNRC}.pdf`, {\n      type: 'application/pdf'\n    });\n\n    return mergedFile;\n  } catch (error) {\n    console.error('Error merging payslips:', error);\n    throw new Error('Failed to merge payslips');\n  }\n};","import React, { useCallback, useRef, useEffect, useMemo } from 'react';\nimport { Box, Typography, Button, Stack, IconButton, Chip, Tooltip, LinearProgress, Divider, Alert } from '@mui/material';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useWizardData, UploadedDoc } from '../WizardDataContext';\nimport { useSnackbar } from '../../feedback/SnackbarProvider';\nimport { useAltus } from '../../../context/AltusContext';\nimport { useUATWorkflow } from '../../../hooks/useUATWorkflow';\nimport { preValidateFile, attemptOcr } from '../../../utils/docValidation';\nimport { mergePayslips } from '../../../utils/payslipMerger';\nimport { mergeNRCImages } from '../../../utils/nrcMerger';\n\nconst docTypes: { label: string; type: UploadedDoc['type']; accept: string; optional?: boolean; helper?: string; }[] = [\n  { label: 'NRC (Front)', type: 'nrc-front', accept: '.jpg,.jpeg,.png,.pdf', helper: 'Clear photo of NRC front side' },\n  { label: 'NRC (Back)', type: 'nrc-back', accept: '.jpg,.jpeg,.png,.pdf', helper: 'Clear photo of NRC back side' },\n  { label: 'Payslip (1 of 3)', type: 'payslip-1', accept: '.jpg,.jpeg,.png,.pdf', helper: 'Oldest of the last 3 payslips' },\n  { label: 'Payslip (2 of 3)', type: 'payslip-2', accept: '.jpg,.jpeg,.png,.pdf', helper: 'Middle month payslip' },\n  { label: 'Payslip (3 of 3)', type: 'payslip-3', accept: '.jpg,.jpeg,.png,.pdf', helper: 'Most recent payslip' },\n  { label: 'Application Form/ Pre-Approval Form', type: 'reference-letter', accept: '.jpg,.jpeg,.png,.pdf', optional: true, helper: 'Pre-approval form from employer or institution' },\n  { label: 'Work ID', type: 'work-id', accept: '.jpg,.jpeg,.png,.pdf', optional: true },\n  { label: 'Selfie / Applicant Photo', type: 'selfie', accept: '.jpg,.jpeg,.png', optional: true, helper: 'Clear, well-lit photo of the applicant' },\n  { label: 'Recent Bank Statement', type: 'bank-statement', accept: '.pdf', optional: true }\n];\n\nexport const DocumentsStep: React.FC = () => {\n  const { documents, addOrReplaceDocument, removeDocument, customer, loan } = useWizardData();\n  const { state } = useAltus();\n  const { submitLoanApplication, uploadDocument } = useUATWorkflow();\n  // Debug to ensure component is loaded and dependencies resolved\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line no-console\n    console.debug('[DocumentsStep] mount', { docCount: documents.length });\n  }\n  const { push } = useSnackbar();\n  const fileInputs = useRef<Record<string, HTMLInputElement | null>>({});\n  const documentsRef = useRef(documents);\n  const activeIntervalsRef = useRef<number[]>([]);\n  const applicationNumberRef = useRef<string | null>(null); // Store ApplicationNumber to reuse for all documents\n  const pendingDocumentsRef = useRef<Map<string, { doc: UploadedDoc, base64: string, typeCode: string }>>(new Map()); // Store pending documents for retry\n\n  // Keep ref synced with latest documents to avoid stale closure inside intervals\n  useEffect(() => { documentsRef.current = documents; }, [documents]);\n\n  // Cleanup intervals on unmount\n  useEffect(() => () => {\n    activeIntervalsRef.current.forEach(id => clearInterval(id));\n    activeIntervalsRef.current = [];\n  }, []);\n\n  // Function to upload document to API after verification\n  const uploadToAPI = useCallback(async (doc: UploadedDoc) => {\n    if (!doc.file) return;\n    \n    try {\n      // Mark as uploading\n      addOrReplaceDocument({ ...doc, status: 'uploading', progress: 0 });\n      \n      // Customer ID is now optional - we can proceed directly to loan application\n      const customerId = customer.customerId || state.currentCustomer?.customerId;\n      console.log('Debug: Customer ID for upload:', customerId || '(none - will use form data)');\n      console.log('Debug: Wizard customer data:', customer);\n      console.log('Debug: Altus context customer:', state.currentCustomer);\n      \n      // Map document type to UAT document type codes per API V2 docs\n      const documentTypeMap: Record<UploadedDoc['type'], string> = {\n        'nrc-front': 'SKIP',      // Will be merged with nrc-back\n        'nrc-back': 'SKIP',       // Will be merged with nrc-front\n        'combined-nrc': '6',      // NRC ID (Client) - merged front+back\n        'payslip': 'SKIP',        // Individual payslips not uploaded\n        'payslip-1': 'SKIP',      // Will be merged into combined-payslips\n        'payslip-2': 'SKIP',      // Will be merged into combined-payslips\n        'payslip-3': 'SKIP',      // Will be merged into combined-payslips\n        'combined-payslips': '18', // Payslip (Last 3 months) - merged 3 payslips\n        'reference-letter': '29',  // Employment Contract\n        'work-id': '29',           // Employment Contract\n        'selfie': '17',            // Passport (closest match for photo ID)\n        'bank-statement': '30'     // Order Copies (supporting financial docs)\n      };\n      \n      const documentTypeCode = documentTypeMap[doc.type] || '6';\n      \n      // Skip upload for individual NRC and payslip documents (will be uploaded as merged)\n      if (documentTypeCode === 'SKIP') {\n        console.log(` Skipping individual upload for ${doc.type} - will be uploaded as merged document`);\n        addOrReplaceDocument({ ...doc, status: 'verified', progress: 100 });\n        return;\n      }\n      \n      // Step 1: Get or create ApplicationNumber\n      // IMPORTANT: Backend requires MANUAL APPROVAL before ApplicationNumber is active\n      // Documents are stored locally and will be uploaded after approval\n      let applicationNumber = applicationNumberRef.current;\n      \n      if (!applicationNumber) {\n        console.log(' Step 1: Submitting loan application for approval...');\n        applicationNumber = await submitLoanApplication();\n        applicationNumberRef.current = applicationNumber; // Store for reuse\n        console.log(' Got ApplicationNumber:', applicationNumber);\n        console.log(' Waiting for backend approval before document upload (storing locally)...');\n      } else {\n        console.log(' Reusing existing ApplicationNumber:', applicationNumber);\n      }\n      \n      // Step 2: Attempt document upload (will be stored locally if pending approval)\n      console.log(' Step 2: Attempting document upload...');\n      \n      try {\n        const response = await uploadDocument(applicationNumber, documentTypeCode, doc.file);\n        \n        // Upload successful - remove from pending queue if it was there\n        pendingDocumentsRef.current.delete(doc.type);\n        \n        // Update document with API response\n        addOrReplaceDocument({ \n          ...doc, \n          id: response,\n          status: 'uploaded', \n          progress: 100 \n        });\n        \n        push(`${doc.type.replace('-', ' ')} uploaded successfully!`, 'success');\n      } catch (uploadError: any) {\n        // Check if error is \"Application Number does not exists\" - this means pending approval\n        const isPendingApproval = uploadError?.message?.includes('Application Number does not exists') || \n                                   uploadError?.details?.executionMessage?.includes('Application Number does not exists');\n        \n        if (isPendingApproval) {\n          // This is expected - loan is pending approval\n          // Store the document data for retry after approval\n          console.log(' Loan application pending approval. Storing document for retry:', doc.type);\n          \n          // Convert file to base64 to store it\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            const base64 = reader.result as string;\n            pendingDocumentsRef.current.set(doc.type, { \n              doc, \n              base64, \n              typeCode: documentTypeCode \n            });\n            \n            // Update pending count immediately\n            const newCount = pendingDocumentsRef.current.size;\n            setPendingCount(newCount);\n            console.log(` Stored ${doc.type} locally. Total pending: ${newCount}`);\n          };\n          reader.readAsDataURL(doc.file);\n          \n          addOrReplaceDocument({ \n            ...doc, \n            status: 'uploaded', // Mark as uploaded (pending in queue)\n            progress: 100,\n            id: `pending-${Date.now()}` // Temporary ID\n          });\n          \n          push(`${doc.type.replace('-', ' ')} ready. Will upload after loan approval.`, 'info');\n        } else {\n          // Actual upload error - re-throw to outer catch\n          throw uploadError;\n        }\n      }\n    } catch (error) {\n      console.error('Error uploading document:', error);\n      \n      // Provide helpful error messages\n      let errorMessage = 'Upload failed';\n      if (error instanceof Error) {\n        errorMessage = error.message;\n      }\n      \n      addOrReplaceDocument({ \n        ...doc, \n        status: 'error', \n        errorMessage \n      });\n      \n      push(`Failed to upload ${doc.type.replace('-', ' ')}. ${errorMessage}`, 'error');\n    }\n  }, [addOrReplaceDocument, state.currentCustomer, customer, submitLoanApplication, uploadDocument, push]);\n\n  const onSelect = useCallback(async (e: React.ChangeEvent<HTMLInputElement>, type: UploadedDoc['type']) => {\n    console.log('Debug: File selection started for type:', type);\n    const file = e.target.files?.[0];\n    if (!file) {\n      console.log('Debug: No file selected');\n      return;\n    }\n    \n    console.log('Debug: File selected:', file.name, 'Size:', file.size, 'Type:', file.type);\n    \n    // Create renamed file with document name and client's NRC\n    const getFileExtension = (filename: string) => {\n      const lastDot = filename.lastIndexOf('.');\n      return lastDot !== -1 ? filename.substring(lastDot) : '';\n    };\n    \n    const getDocumentDisplayName = (docType: UploadedDoc['type']) => {\n      const docConfig = docTypes.find(d => d.type === docType);\n      return docConfig?.label.replace(/[^\\w\\s-]/g, '').replace(/\\s+/g, '_') || docType;\n    };\n    \n    const clientNRC = customer?.nrc || 'Unknown_NRC';\n    const sanitizedNRC = typeof clientNRC === 'string' ? clientNRC.replace(/[^\\w]/g, '') : String(clientNRC).replace(/[^\\w]/g, '');\n    const documentName = getDocumentDisplayName(type);\n    const fileExtension = getFileExtension(file.name);\n    const newFileName = `${documentName}_${sanitizedNRC}${fileExtension}`;\n    \n    // Create a new file object with the renamed filename\n    const renamedFile = new File([file], newFileName, { type: file.type });\n    \n    console.log('Debug: Starting file validation for:', renamedFile.name);\n    const pre = await preValidateFile(renamedFile);\n    console.log('Debug: File validation result:', pre);\n    \n    if (!pre.ok) {\n      console.log('Debug: File validation failed:', pre.error);\n      push(pre.error || 'File rejected', 'error');\n      addOrReplaceDocument({ file: renamedFile, type, status: 'error', errorMessage: pre.error });\n      return;\n    }\n    const existingDup = documents.find(d => d.checksumSha256 && d.checksumSha256 === pre.meta?.checksum && d.type !== type);\n    if (existingDup) {\n      push('This file appears already uploaded under a different document type.', 'warning');\n      addOrReplaceDocument({ file: renamedFile, type, status: 'error', errorMessage: 'Duplicate of another document', checksumSha256: pre.meta?.checksum });\n      return;\n    }\n    const previewUrl = renamedFile.type.startsWith('image/') ? URL.createObjectURL(renamedFile) : undefined;\n    addOrReplaceDocument({ file: renamedFile, type, status: 'verifying', previewUrl, mimeType: pre.meta?.mimeType, sizeBytes: pre.meta?.sizeBytes, checksumSha256: pre.meta?.checksum, progress: 0 });\n    const start = Date.now();\n    const sizeFactor = Math.min(1.8, Math.max(1, (pre.meta!.sizeBytes / (1024 * 1024))));\n    const interval = window.setInterval(async () => {\n      const current = documentsRef.current.find(d => d.type === type);\n      if (!current) return;\n      const elapsed = Date.now() - start;\n      const pct = Math.min(95, Math.round((elapsed / (1200 * sizeFactor)) * 100));\n      addOrReplaceDocument({ ...current, progress: pct });\n      if (pct >= 95) {\n        clearInterval(interval);\n        activeIntervalsRef.current = activeIntervalsRef.current.filter(id => id !== interval);\n        \n        // Safely attempt OCR with error handling\n        let ocr = null;\n        try {\n          ocr = await attemptOcr(renamedFile);\n        } catch (ocrError) {\n          console.warn('OCR processing failed for file:', renamedFile.name, ocrError);\n        }\n        \n        let notes = 'Basic checks passed';\n        if (ocr?.detectedNrc && type === 'nrc-front') {\n          // Get NRC from customer data\n          const customerNrc = customer?.nrc;\n          \n          if (customerNrc && customerNrc.trim().length > 0) {\n            // Normalize both NRCs for comparison - remove slashes, spaces, hyphens\n            const normalizeNrc = (nrc: string) => nrc.replace(/[/\\s\\-]/g, '').toLowerCase().trim();\n            const detectedNormalized = normalizeNrc(ocr.detectedNrc);\n            const customerNormalized = normalizeNrc(String(customerNrc));\n            \n            const isMatch = detectedNormalized === customerNormalized;\n            notes += isMatch ? ' | NRC match confirmed' : ` | NRC mismatch (detected: ${ocr.detectedNrc}, expected: ${customerNrc})`;\n            \n            console.log('NRC Validation:', {\n              detected: ocr.detectedNrc,\n              detectedNormalized,\n              customer: customerNrc,\n              customerNormalized,\n              match: isMatch\n            });\n          } else {\n            console.log('NRC Validation: Customer NRC not available for comparison, detected:', ocr.detectedNrc);\n            notes += ` | NRC detected: ${ocr.detectedNrc} (no customer NRC to compare)`;\n          }\n        }\n        \n        const verifiedDoc = { \n          file: renamedFile, \n          type, \n          status: 'verified' as const, \n          previewUrl, \n          mimeType: pre.meta?.mimeType, \n          sizeBytes: pre.meta?.sizeBytes, \n          checksumSha256: pre.meta?.checksum, \n          extractedTextSnippet: ocr?.snippet, \n          verificationNotes: notes, \n          progress: 100 \n        };\n        \n        addOrReplaceDocument(verifiedDoc);\n        push('Document verified', 'success');\n        \n        // Upload to API after verification\n        setTimeout(() => uploadToAPI(verifiedDoc), 500);\n      }\n    }, 150);\n    activeIntervalsRef.current.push(interval);\n  }, [addOrReplaceDocument, documents, push, customer, uploadToAPI]);\n  \n  const checkAndMergePayslips = useCallback(async () => {\n    const payslip1 = documents.find(d => d.type === 'payslip-1' && d.status === 'verified');\n    const payslip2 = documents.find(d => d.type === 'payslip-2' && d.status === 'verified');\n    const payslip3 = documents.find(d => d.type === 'payslip-3' && d.status === 'verified');\n    \n    // Check if all payslips are verified and none are already merged\n    if (payslip1 && payslip2 && payslip3 && \n        payslip1.file && payslip2.file && payslip3.file &&\n        !documents.find(d => d.type === 'combined-payslips')) {\n      \n      try {\n        push('Merging payslips into single document...', 'info');\n        \n        const clientNRC = customer?.nrc || 'Unknown_NRC';\n        const mergedFile = await mergePayslips(payslip1.file, payslip2.file, payslip3.file, String(clientNRC));\n        \n        // Add the merged document\n        const mergedDoc = {\n          file: mergedFile,\n          type: 'combined-payslips' as UploadedDoc['type'],\n          status: 'verified' as const,\n          mimeType: 'application/pdf',\n          sizeBytes: mergedFile.size,\n          verificationNotes: 'Combined from 3 individual payslips',\n          progress: 100\n        };\n        \n        addOrReplaceDocument(mergedDoc);\n        \n        push('Payslips successfully merged into single document', 'success');\n        \n        // Upload merged document to API\n        setTimeout(() => uploadToAPI(mergedDoc), 500);\n      } catch (error) {\n        console.error('Failed to merge payslips:', error);\n        push('Failed to merge payslips - individual files preserved', 'error');\n      }\n    }\n  }, [documents, customer, addOrReplaceDocument, push, uploadToAPI]);\n  \n  // NRC merging function\n  const checkAndMergeNRC = useCallback(async () => {\n    const nrcFront = documents.find(d => d.type === 'nrc-front' && d.status === 'verified');\n    const nrcBack = documents.find(d => d.type === 'nrc-back' && d.status === 'verified');\n    \n    // Check if both NRC front and back are verified and not already merged\n    if (nrcFront && nrcBack && \n        nrcFront.file && nrcBack.file &&\n        !documents.find(d => d.type === 'combined-nrc')) {\n      \n      try {\n        push('Merging NRC front and back into single document...', 'info');\n        \n        const clientNRC = customer?.nrc || 'Unknown_NRC';\n        const mergedFile = await mergeNRCImages(nrcFront.file, nrcBack.file, String(clientNRC));\n        \n        // Add the merged document\n        const mergedDoc = {\n          file: mergedFile,\n          type: 'combined-nrc' as UploadedDoc['type'],\n          status: 'verified' as const,\n          mimeType: 'application/pdf',\n          sizeBytes: mergedFile.size,\n          verificationNotes: 'Combined NRC front and back',\n          progress: 100\n        };\n        \n        addOrReplaceDocument(mergedDoc);\n        \n        push('NRC documents successfully merged', 'success');\n        \n        // Upload merged document to API\n        setTimeout(() => uploadToAPI(mergedDoc), 500);\n      } catch (error) {\n        console.error('Failed to merge NRC documents:', error);\n        push('Failed to merge NRC documents - individual files preserved', 'error');\n      }\n    }\n  }, [documents, customer, addOrReplaceDocument, push, uploadToAPI]);\n  \n  // Check for payslip merge when documents change\n  useEffect(() => {\n    const payslipTypes = ['payslip-1', 'payslip-2', 'payslip-3'];\n    const verifiedPayslips = payslipTypes.filter(type => \n      documents.find(d => d.type === type && d.status === 'verified')\n    );\n    \n    // If all 3 payslips are verified and no merged document exists, trigger merge\n    if (verifiedPayslips.length === 3 && !documents.find(d => d.type === 'combined-payslips')) {\n      checkAndMergePayslips();\n    }\n  }, [documents, checkAndMergePayslips]);\n  \n  // Check for NRC merge when documents change\n  useEffect(() => {\n    const nrcFront = documents.find(d => d.type === 'nrc-front' && d.status === 'verified');\n    const nrcBack = documents.find(d => d.type === 'nrc-back' && d.status === 'verified');\n    \n    // If both NRC documents are verified and no merged document exists, trigger merge\n    if (nrcFront && nrcBack && !documents.find(d => d.type === 'combined-nrc')) {\n      checkAndMergeNRC();\n    }\n  }, [documents, checkAndMergeNRC]);\n  \n  const docsByType = useCallback((t: UploadedDoc['type']) => documents.find(d => d.type === t), [documents]);\n  const openPicker = (type: UploadedDoc['type']) => {\n    console.log('Debug: Opening file picker for type:', type);\n    const input = fileInputs.current[type];\n    console.log('Debug: File input element:', input);\n    if (input) {\n      input.click();\n      console.log('Debug: File picker clicked');\n    } else {\n      console.error('Debug: File input not found for type:', type);\n    }\n  };\n\n  (window as any).__documentsStepValidate = async () => {\n    const required: UploadedDoc['type'][] = ['nrc-front','payslip-1','payslip-2','payslip-3'];\n    const missing = required.filter(r => !docsByType(r));\n    if (missing.length) { push('Please upload all required documents: ' + missing.join(', '), 'error'); return false; }\n    \n    // Check if payslips are still verifying (informational only - don't block)\n    const payslipTypes = ['payslip-1','payslip-2','payslip-3'] as const;\n    const payslipsVerifying = payslipTypes.some(p => docsByType(p)?.status === 'verifying');\n    if (payslipsVerifying) { \n      push(' Payslips are being verified. You can proceed to Review - verification will continue in background.', 'info'); \n    }\n    \n    // Check for NRC mismatch (warning only - don't block)\n    const nrcDoc = docsByType('nrc-front');\n    const mism = nrcDoc?.verificationNotes?.includes('mismatch');\n    if (mism) push('Warning: NRC mismatch detected  please verify ID number.', 'warning');\n    \n    // Inform user about pending approval if applicable\n    if (!applicationNumberRef.current) {\n      push(' Documents saved. You can proceed to Review while waiting for loan approval.', 'info');\n    }\n    \n    return true;\n  };\n\n  // Retry uploading pending documents\n  const retryPendingUploads = useCallback(async () => {\n    if (!applicationNumberRef.current || pendingDocumentsRef.current.size === 0) {\n      push('No pending documents to retry', 'info');\n      return;\n    }\n\n    console.log(` Retrying ${pendingDocumentsRef.current.size} pending document(s)...`);\n    push(`Retrying ${pendingDocumentsRef.current.size} pending document(s)...`, 'info');\n\n    const pendingArray = Array.from(pendingDocumentsRef.current.entries());\n    \n    for (const [docType, { doc, typeCode }] of pendingArray) {\n      if (!doc.file) continue;\n      \n      try {\n        console.log(` Retrying upload for: ${docType}`);\n        addOrReplaceDocument({ ...doc, status: 'uploading', progress: 50 });\n        \n        const response = await uploadDocument(applicationNumberRef.current, typeCode, doc.file);\n        \n        // Success - remove from pending\n        pendingDocumentsRef.current.delete(docType);\n        \n        addOrReplaceDocument({ \n          ...doc, \n          id: response,\n          status: 'uploaded', \n          progress: 100 \n        });\n        \n        push(`${docType.replace('-', ' ')} uploaded successfully!`, 'success');\n      } catch (error: any) {\n        console.error(`Failed to retry ${docType}:`, error);\n        // Keep in pending queue for next retry\n        addOrReplaceDocument({ \n          ...doc, \n          status: 'uploaded', // Keep as \"uploaded\" (pending)\n          progress: 100 \n        });\n      }\n    }\n\n    if (pendingDocumentsRef.current.size === 0) {\n      push('All documents uploaded successfully!', 'success');\n      setPendingCount(0);\n    } else {\n      const remaining = pendingDocumentsRef.current.size;\n      setPendingCount(remaining);\n      push(`${remaining} document(s) still pending approval`, 'warning');\n    }\n  }, [uploadDocument, addOrReplaceDocument, push]);\n\n  // Derived progress & group metrics\n  const requiredArr: UploadedDoc['type'][] = ['nrc-front','payslip-1','payslip-2','payslip-3'];\n  const requiredVerified = requiredArr.filter(t => docsByType(t)?.status === 'verified').length;\n  const payslipDocs = useMemo(() => docTypes.filter(d => d.type.startsWith('payslip-')).map(cfg => ({ cfg, doc: docsByType(cfg.type) })), [docsByType]);\n  const payslipsVerified = payslipDocs.filter(p => p.doc?.status === 'verified').length;\n  const selfieDoc = docsByType('selfie');\n  const overallPct = useMemo(() => Math.round((requiredVerified / requiredArr.length) * 100), [requiredVerified, requiredArr.length]);\n  \n  // Track pending documents count (refresh when documents change)\n  const [pendingCount, setPendingCount] = React.useState(0);\n  React.useEffect(() => {\n    const count = pendingDocumentsRef.current.size;\n    setPendingCount(count);\n    console.log(` Pending documents count updated: ${count}`);\n  }, [documents]); // Re-check when documents array changes\n  \n  // Also update count after uploads complete\n  const updatePendingCount = useCallback(() => {\n    const count = pendingDocumentsRef.current.size;\n    setPendingCount(count);\n    console.log(` Pending documents count: ${count}`);\n  }, []);\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom>Supporting Documents</Typography>\n      \n      {/* Pending Documents Warning Banner */}\n      {pendingCount > 0 && (\n        <Alert \n          severity=\"warning\" \n          sx={{ \n            mb: 2,\n            border: '2px solid',\n            borderColor: 'warning.main',\n            boxShadow: '0 4px 12px rgba(255, 152, 0, 0.2)'\n          }}\n          action={\n            <Button \n              color=\"inherit\" \n              size=\"small\" \n              onClick={retryPendingUploads}\n              sx={{ \n                whiteSpace: 'nowrap',\n                fontWeight: 700,\n                bgcolor: 'warning.dark',\n                color: 'white',\n                '&:hover': {\n                  bgcolor: 'warning.main'\n                }\n              }}\n            >\n               Retry Upload ({pendingCount})\n            </Button>\n          }\n        >\n          <Typography variant=\"body2\" sx={{ fontWeight: 700, fontSize: '1rem' }}>\n             {pendingCount} Document(s) Awaiting Backend Approval\n          </Typography>\n          <Typography variant=\"caption\" sx={{ display: 'block', mt: 0.5 }}>\n            <strong>Application Number: {applicationNumberRef.current}</strong>\n            <br />\n            Your loan application requires manual approval from the Altus system administrator before documents can be uploaded. \n            All documents are saved securely in your browser.\n            <br />\n            <strong>What happens next:</strong>\n            <ul style={{ margin: '8px 0', paddingLeft: '20px' }}>\n              <li>Administrator reviews your loan application ({applicationNumberRef.current})</li>\n              <li>Once approved, click \"Retry Upload\" to upload all pending documents</li>\n              <li>You can close this page and return later - your documents are saved locally</li>\n            </ul>\n            <em>Approval typically takes 5-15 minutes during business hours.</em>\n          </Typography>\n        </Alert>\n      )}\n      \n      {/* Loan Approval Status Alert */}\n      {applicationNumberRef.current && pendingCount === 0 && (\n        <Alert \n          severity=\"info\" \n          sx={{ mb: 2 }}\n        >\n          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n             Loan Application: {applicationNumberRef.current}\n          </Typography>\n          <Typography variant=\"caption\" sx={{ display: 'block', mt: 0.5 }}>\n            <strong>Status:</strong> Pending backend approval by Altus administrator.\n            <br />\n            Continue uploading documents - they will be stored locally and uploaded automatically after approval.\n          </Typography>\n        </Alert>\n      )}\n      \n      {/* Customer Notice */}\n      {!state.currentCustomer?.customerId && !customer?.customerId && (\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\n          <Typography variant=\"body2\" sx={{ fontWeight: 600, mb: 0.5 }}>\n             Fast Track Mode Active\n          </Typography>\n          <Typography variant=\"caption\" sx={{ display: 'block' }}>\n            Skip creating a customer account - just fill the form in Step 1 and Step 2, then upload documents here. \n            Your loan application will be created automatically using your form data.\n          </Typography>\n        </Alert>\n      )}\n      \n      <Box sx={{ mb:2, p:2, border:'1px solid', borderColor:'divider', borderRadius:2, background: overallPct === 100 ? 'linear-gradient(90deg,#093B18,#2E7D32)' : 'linear-gradient(90deg,#132F52,#063970)', color:'#fff' }}>\n        <Stack direction={{ xs:'column', sm:'row' }} spacing={1.5} alignItems={{ xs:'flex-start', sm:'center' }}>\n          <Typography variant=\"subtitle2\" sx={{ fontWeight:600 }}>Required Docs: {requiredVerified}/{requiredArr.length} verified</Typography>\n          <Box sx={{ flex:1, width:'100%', maxWidth:260 }}>\n            <LinearProgress variant=\"determinate\" value={overallPct} sx={{ height:8, borderRadius:4, background:'rgba(255,255,255,0.2)', '& .MuiLinearProgress-bar':{ background:'#fff' } }} />\n          </Box>\n          <Typography variant=\"caption\" sx={{ opacity:0.9 }}>{overallPct}%</Typography>\n        </Stack>\n      </Box>\n      <Typography variant=\"body2\" sx={{ mb:2 }}>Upload the required documents. You can replace a file by selecting it again.</Typography>\n      <Stack spacing={3}>\n        {docTypes.filter(d => !d.type.startsWith('payslip-')).map(cfg => {\n          const existing = docsByType(cfg.type);\n            const isSelfie = cfg.type === 'selfie';\n            const mismatchWarning = cfg.type === 'nrc-front' && existing?.verificationNotes?.includes('mismatch');\n          return (\n            <Box key={cfg.type} sx={{ p:2, border:'1px dashed', borderColor: mismatchWarning ? 'error.light' : 'divider', borderRadius:2, position:'relative' }}>\n              {mismatchWarning && <Chip size=\"small\" color=\"error\" label=\"NRC Mismatch\" sx={{ position:'absolute', top:8, right:8 }} />}\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <Box sx={{ flex:1 }}>\n                  <Typography variant=\"subtitle2\">{cfg.label}</Typography>\n                  {cfg.helper && <Typography variant=\"caption\" sx={{ display:'block', color:'text.secondary', mt:0.25 }}>{cfg.helper}</Typography>}\n                  {cfg.optional && !existing && <Typography variant=\"caption\" sx={{ color:'text.secondary' }}>Optional</Typography>}\n                  {existing ? (\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mt:1, flexWrap:'wrap' }}>\n                      <Chip size=\"small\" color={existing.status === 'verified' ? 'success' : existing.status === 'error' ? 'error' : existing.status === 'verifying' ? 'warning' : 'default'} label={existing.file?.name || existing.checksumSha256?.slice(0,8) || 'Document'} />\n                      {existing.previewUrl && existing.file && (\n                        <img src={existing.previewUrl} alt={cfg.label + ' preview'} style={{ width: isSelfie ? 60 : 48, height: isSelfie ? 60 : 48, objectFit:'cover', borderRadius: isSelfie ? '50%' : 6, border: isSelfie ? '2px solid #1976d2' : '1px solid rgba(0,0,0,0.15)' }} />\n                      )}\n                      <StatusChip status={existing.status} />\n                      {existing.sizeBytes && <Tooltip title={`~${Math.round(existing.sizeBytes/1024)} KB`}><Chip size=\"small\" variant=\"outlined\" label={Math.round(existing.sizeBytes/1024)+' KB'} /></Tooltip>}\n                      {typeof existing.progress === 'number' && existing.status !== 'verified' && (\n                        <Box sx={{ width:140, ml:1 }}><LinearProgress variant=\"determinate\" value={existing.progress} sx={{ height:6, borderRadius:3 }} /></Box>\n                      )}\n                      {existing.verificationNotes && existing.status === 'verified' && cfg.type === 'nrc-front' && (\n                        <Tooltip title={existing.verificationNotes}><Chip size=\"small\" variant=\"outlined\" label={existing.verificationNotes.includes('mismatch') ? 'Mismatch' : 'Match'} color={existing.verificationNotes.includes('mismatch') ? 'error' : 'success'} /></Tooltip>\n                      )}\n                    </Stack>\n                  ) : <Typography variant=\"caption\" sx={{ color:'text.secondary' }}>No file selected</Typography>}\n                </Box>\n                <input type=\"file\" ref={el => fileInputs.current[cfg.type] = el} accept={cfg.accept} style={{ display:'none' }} onChange={(e) => onSelect(e, cfg.type)} />\n                <Button variant=\"outlined\" startIcon={<UploadFileIcon />} onClick={() => openPicker(cfg.type)}>{existing ? 'Replace' : 'Select'}</Button>\n                {existing && <IconButton color=\"error\" onClick={() => removeDocument(cfg.type)} aria-label={`Remove ${cfg.label}`}><DeleteIcon /></IconButton>}\n              </Stack>\n            </Box>\n          );\n        })}\n        <Box sx={{ p:2, border:'1px solid', borderColor:'divider', borderRadius:2 }}>\n          <Stack direction={{ xs:'column', sm:'row' }} alignItems={{ xs:'flex-start', sm:'center' }} spacing={2} sx={{ mb:1 }}>\n            <Typography variant=\"subtitle2\" sx={{ fontWeight:600 }}>Payslips (3)</Typography>\n            <Box sx={{ flex:1, width:'100%', maxWidth:240 }}><LinearProgress variant=\"determinate\" value={(payslipsVerified/3)*100} sx={{ height:6, borderRadius:3 }} /></Box>\n            <Typography variant=\"caption\" sx={{ color:'text.secondary' }}>{payslipsVerified}/3 verified</Typography>\n          </Stack>\n          <Divider sx={{ mb:1 }} />\n          <Stack spacing={2}>\n            {payslipDocs.map(({ cfg, doc }) => (\n              <Box key={cfg.type} sx={{ p:1.5, border:'1px dashed', borderColor:'divider', borderRadius:2 }}>\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                  <Box sx={{ flex:1 }}>\n                    <Typography variant=\"body2\" sx={{ fontWeight:500 }}>{cfg.label}</Typography>\n                    {cfg.helper && <Typography variant=\"caption\" sx={{ color:'text.secondary' }}>{cfg.helper}</Typography>}\n                    {doc ? (\n                      <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mt:0.75, flexWrap:'wrap' }}>\n                        <Chip size=\"small\" color={doc.status === 'verified' ? 'success' : doc.status === 'error' ? 'error' : doc.status === 'verifying' ? 'warning' : 'default'} label={doc.file?.name || doc.checksumSha256?.slice(0,8) || 'Payslip'} />\n                        {doc.previewUrl && doc.file && <img src={doc.previewUrl} alt={cfg.label + ' preview'} style={{ width:42, height:42, objectFit:'cover', borderRadius:4 }} />}\n                        <StatusChip status={doc.status} />\n                        {typeof doc.progress === 'number' && doc.status !== 'verified' && (<Box sx={{ width:120 }}><LinearProgress variant=\"determinate\" value={doc.progress} sx={{ height:5, borderRadius:3 }} /></Box>)}\n                      </Stack>\n                    ) : <Typography variant=\"caption\" sx={{ color:'text.secondary' }}>No file selected</Typography>}\n                  </Box>\n                  <input type=\"file\" ref={el => fileInputs.current[cfg.type] = el} accept={cfg.accept} style={{ display:'none' }} onChange={(e) => onSelect(e, cfg.type)} />\n                  <Button size=\"small\" variant=\"outlined\" startIcon={<UploadFileIcon />} onClick={() => openPicker(cfg.type)}>{doc ? 'Replace' : 'Select'}</Button>\n                  {doc && <IconButton size=\"small\" color=\"error\" onClick={() => removeDocument(cfg.type)} aria-label={`Remove ${cfg.label}`}><DeleteIcon fontSize=\"small\" /></IconButton>}\n                </Stack>\n              </Box>\n            ))}\n          </Stack>\n        </Box>\n        \n        {/* Combined NRC Display */}\n        {documents.find(d => d.type === 'combined-nrc') && (\n          <Box sx={{ p:2, border:'2px solid', borderColor:'primary.light', borderRadius:2, background:'linear-gradient(90deg,#0d47a1,#1976d2)', color:'#fff', mb:2 }}>\n            <Typography variant=\"subtitle2\" sx={{ fontWeight:600, mb:1 }}> Combined NRC Document</Typography>\n            {(() => {\n              const combinedDoc = documents.find(d => d.type === 'combined-nrc');\n              return combinedDoc ? (\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                  <Box sx={{ flex:1 }}>\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ flexWrap:'wrap' }}>\n                      <Chip \n                        size=\"small\" \n                        color=\"primary\" \n                        label={combinedDoc.file?.name || 'NRC_Combined.pdf'} \n                        sx={{ background:'rgba(255,255,255,0.9)', color:'#0d47a1' }}\n                      />\n                      <Chip \n                        size=\"small\" \n                        variant=\"outlined\" \n                        label=\"MERGED\" \n                        sx={{ borderColor:'rgba(255,255,255,0.5)', color:'#fff' }}\n                      />\n                      {combinedDoc.sizeBytes && (\n                        <Chip \n                          size=\"small\" \n                          variant=\"outlined\" \n                          label={`${Math.round(combinedDoc.sizeBytes/1024)} KB`}\n                          sx={{ borderColor:'rgba(255,255,255,0.5)', color:'#fff' }}\n                        />\n                      )}\n                    </Stack>\n                    <Typography variant=\"caption\" sx={{ display:'block', mt:0.5, opacity:0.9 }}>\n                      NRC front and back have been automatically combined into a single PDF document\n                    </Typography>\n                  </Box>\n                  <IconButton \n                    size=\"small\" \n                    sx={{ color:'#fff' }} \n                    onClick={() => removeDocument('combined-nrc')} \n                    aria-label=\"Remove combined NRC\"\n                  >\n                    <DeleteIcon fontSize=\"small\" />\n                  </IconButton>\n                </Stack>\n              ) : null;\n            })()}\n          </Box>\n        )}\n        \n        {/* Combined Payslips Display */}\n        {documents.find(d => d.type === 'combined-payslips') && (\n          <Box sx={{ p:2, border:'2px solid', borderColor:'success.light', borderRadius:2, background:'linear-gradient(90deg,#1b5e20,#2e7d32)', color:'#fff' }}>\n            <Typography variant=\"subtitle2\" sx={{ fontWeight:600, mb:1 }}> Combined Payslips Document</Typography>\n            {(() => {\n              const combinedDoc = documents.find(d => d.type === 'combined-payslips');\n              return combinedDoc ? (\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                  <Box sx={{ flex:1 }}>\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ flexWrap:'wrap' }}>\n                      <Chip \n                        size=\"small\" \n                        color=\"success\" \n                        label={combinedDoc.file?.name || 'Combined_Payslips.pdf'} \n                        sx={{ background:'rgba(255,255,255,0.9)', color:'#1b5e20' }}\n                      />\n                      <Chip \n                        size=\"small\" \n                        variant=\"outlined\" \n                        label=\"MERGED\" \n                        sx={{ borderColor:'rgba(255,255,255,0.5)', color:'#fff' }}\n                      />\n                      {combinedDoc.sizeBytes && (\n                        <Chip \n                          size=\"small\" \n                          variant=\"outlined\" \n                          label={`${Math.round(combinedDoc.sizeBytes/1024)} KB`}\n                          sx={{ borderColor:'rgba(255,255,255,0.5)', color:'#fff' }}\n                        />\n                      )}\n                    </Stack>\n                    <Typography variant=\"caption\" sx={{ display:'block', mt:0.5, opacity:0.9 }}>\n                      All three payslips have been automatically combined into a single PDF document\n                    </Typography>\n                  </Box>\n                  <IconButton \n                    size=\"small\" \n                    sx={{ color:'#fff' }} \n                    onClick={() => removeDocument('combined-payslips')} \n                    aria-label=\"Remove combined payslips\"\n                  >\n                    <DeleteIcon fontSize=\"small\" />\n                  </IconButton>\n                </Stack>\n              ) : null;\n            })()}\n          </Box>\n        )}\n      </Stack>\n      <Typography variant=\"caption\" sx={{ mt:3, display:'block', color:'text.secondary' }}>Files are stored locally until you submit. Verification here is preliminary.{selfieDoc ? '' : ' (Adding a selfie can speed up identity confirmation.)'}</Typography>\n    </Box>\n  );\n};\n\nconst StatusChip: React.FC<{ status?: UploadedDoc['status'] }> = ({ status }) => {\n  if (!status) return null;\n  const map: Record<string, { color: 'default' | 'success' | 'warning' | 'error'; label: string; }> = {\n    pending: { color: 'default', label: 'PENDING' },\n    uploading: { color: 'warning', label: 'UPLOADING' },\n    uploaded: { color: 'default', label: 'UPLOADED' },\n    verifying: { color: 'warning', label: 'VERIFYING' },\n    verified: { color: 'success', label: 'VERIFIED' },\n    error: { color: 'error', label: 'ERROR' }\n  };\n  const meta = map[status];\n  return <Chip size=\"small\" variant=\"outlined\" color={meta.color} label={meta.label} />;\n};\n\nexport default DocumentsStep;\n","// Utility for merging NRC front and back images into a single PDF\nimport { jsPDF } from 'jspdf';\n\nexport const mergeNRCImages = async (nrcFront: File, nrcBack: File, clientNRC: string): Promise<File> => {\n  const pdf = new jsPDF();\n  let pageAdded = false;\n\n  const addImageToPDF = async (file: File, pageLabel: string) => {\n    return new Promise<void>((resolve, reject) => {\n      const reader = new FileReader();\n      \n      reader.onload = async (e) => {\n        try {\n          const result = e.target?.result;\n          \n          if (file.type.startsWith('image/')) {\n            // For image files, add them directly to the PDF with compression\n            if (pageAdded) pdf.addPage();\n            \n            const img = new Image();\n            img.onload = () => {\n              try {\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                if (!ctx) throw new Error('Canvas context not available');\n                \n                // Calculate dimensions to fit page\n                const pageWidth = 190; // A4 width minus margins\n                const pageHeight = 270; // A4 height minus margins\n                const imgRatio = img.width / img.height;\n                const pageRatio = pageWidth / pageHeight;\n                \n                let pdfWidth, pdfHeight;\n                if (imgRatio > pageRatio) {\n                  pdfWidth = pageWidth;\n                  pdfHeight = pageWidth / imgRatio;\n                } else {\n                  pdfHeight = pageHeight;\n                  pdfWidth = pageHeight * imgRatio;\n                }\n                \n                // Optimize canvas size - use max 1200px width for compression\n                const maxWidth = 1200;\n                const maxHeight = 1200;\n                let canvasWidth = img.width;\n                let canvasHeight = img.height;\n                \n                if (canvasWidth > maxWidth || canvasHeight > maxHeight) {\n                  const scale = Math.min(maxWidth / canvasWidth, maxHeight / canvasHeight);\n                  canvasWidth = Math.floor(canvasWidth * scale);\n                  canvasHeight = Math.floor(canvasHeight * scale);\n                }\n                \n                // Set canvas to optimized size\n                canvas.width = canvasWidth;\n                canvas.height = canvasHeight;\n                \n                // Draw scaled image\n                ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);\n                \n                // Convert to JPEG with compression (0.7 quality = good balance)\n                const imgData = canvas.toDataURL('image/jpeg', 0.7);\n                pdf.addImage(imgData, 'JPEG', 10, 10, pdfWidth, pdfHeight);\n                \n                // Add label\n                pdf.setFontSize(10);\n                pdf.setTextColor(100);\n                pdf.text(`${pageLabel}`, 10, pdfHeight + 20);\n                \n                pageAdded = true;\n                resolve();\n              } catch (err) {\n                reject(err);\n              }\n            };\n            \n            img.onerror = () => reject(new Error(`Failed to load image: ${file.name}`));\n            \n            if (typeof result === 'string') {\n              img.src = result;\n            } else {\n              reject(new Error('Invalid file data'));\n            }\n          } else if (file.type === 'application/pdf') {\n            // For PDF files, add a placeholder page\n            if (pageAdded) pdf.addPage();\n            pdf.setFontSize(16);\n            pdf.text(pageLabel, 20, 30);\n            pdf.setFontSize(10);\n            pdf.text(`Original file: ${file.name}`, 20, 50);\n            pdf.text(`File size: ${Math.round(file.size / 1024)} KB`, 20, 60);\n            pdf.text(`Note: PDF content preserved in original file`, 20, 70);\n            pageAdded = true;\n            resolve();\n          } else {\n            reject(new Error(`Unsupported file type: ${file.type}`));\n          }\n        } catch (err) {\n          reject(err);\n        }\n      };\n      \n      reader.onerror = () => reject(new Error('Failed to read file'));\n      reader.readAsDataURL(file);\n    });\n  };\n\n  try {\n    // Add NRC Front\n    await addImageToPDF(nrcFront, 'NRC Front');\n    \n    // Add NRC Back\n    await addImageToPDF(nrcBack, 'NRC Back');\n    \n    // Generate PDF blob\n    const pdfBlob = pdf.output('blob');\n    \n    // Create File object with descriptive name\n    const timestamp = Date.now();\n    const fileName = `NRC_Combined_${clientNRC}_${timestamp}.pdf`;\n    \n    return new File([pdfBlob], fileName, { type: 'application/pdf' });\n  } catch (error) {\n    console.error('Error merging NRC images:', error);\n    throw error;\n  }\n};\n","/**\n * ALTUS API - Valid Bank Branch Mapping\n * \n * This file contains the complete, accurate mapping of all major Zambian banks\n * to their exact ALTUS-accepted branch names.\n * \n *  CRITICAL: ALTUS Production API accepts ONLY these exact branch names.\n * Any deviation will result in validation errors from the backend.\n * \n * Last verified: December 3, 2025\n * Source: ALTUS Production API error messages (confirmed by actual API responses)\n */\n\n// ============================================================================\n// ALTUS-ACCEPTED BRANCH NAMES (29 Production Branches - CONFIRMED)\n// ============================================================================\n\n/**\n * Complete list of all valid ALTUS branch names.\n * These are the ONLY 29 branch names accepted by the ALTUS Production API.\n * \n * This list is compiled from ACTUAL API error messages received on Dec 3, 2025.\n * All branches have been confirmed by real production API responses.\n */\nexport const allValidBranches = [\n  // ========== PRODUCTION API BRANCHES (CONFIRMED BY API) ==========\n  // These 29 branches are the ONLY branches accepted by ALTUS Production API\n  \n  // Lusaka Province (11 branches + 1 HQ)\n  'Head Office',\n  'Lusaka Square',\n  'Lusaka South End',\n  'Lusaka Corporate Service Centre Branch',\n  'Kalingalinga',\n  'Tazara',\n  'Garden',\n  'Makumbi',\n  'Bread of Life',\n  'Longacres Prestige Branch',\n  'Manda Hill Branch',\n  'Matero Branch',\n  \n  // Copperbelt Province (5 branches)\n  'Ndola',\n  'Kitwe',\n  'Kitwe Agency',\n  'Chililabombwe',\n  'Chingola',\n  \n  // Northern Province (4 branches)\n  'Kasama',\n  'Mpulungu',\n  'Mbala',\n  'Mbala Branch Zambia',\n  \n  // Luapula Province (3 branches)\n  'Mansa',\n  'Mansa Branch',\n  'Mwense',\n  \n  // Eastern Province (2 branches)\n  'Chipata',\n  'Petauke Branch',\n  \n  // North-Western Province (2 branches)\n  'Solwezi',\n  'Mufumbwe',\n  \n  // Central Province (1 branch)\n  'Mkushi Branch',\n] as const;\n\n// Type-safe branch name type\nexport type ValidBranchName = typeof allValidBranches[number];\n\n// ============================================================================\n// BANK-TO-BRANCH MAPPING\n// ============================================================================\n\n/**\n * Mapping of Zambian banks to their ALTUS-accepted branch names.\n * Updated with proper bank-branch associations based on ALTUS API mappings.\n * Keys are ALTUS FinancialInstitutionId values for direct API compatibility.\n */\nexport const bankBranchMap = {\n  // ZNBS - Zambia National Building Society\n  'BNK20201490000000622': [\n    'Banking Society Business Park',\n    'Mufulira',\n    'Mpika',\n    'Mansa',\n    'Kapiri Mposhi',\n    'Livingstone',\n    'Mazabuka',\n    'Mongu',\n    'Luanshya',\n    'Solwezi',\n    'Kasama',\n    'Society House',\n    'Permanent House',\n    'Kabwe',\n    'Chipata',\n    'Choma',\n    'Soweto Agency',\n    'Chililabombwe',\n    'Chingola',\n    'Nyimba',\n    'Kitwe',\n    'Ndola'\n  ],\n\n  // AB Bank\n  'BNK20200430000000002': [\n    'Head Office',\n    'Cairo Main',\n    'Chilenje',\n    'Matero',\n    'Kalinglinga',\n    'Chelston',\n    'Garden',\n    'Kitwe'\n  ],\n\n  // Access Bank\n  'BNK20200430000000006': [\n    'Head Office',\n    'Cairo Road',\n    'Longacres',\n    'Acacia',\n    'Makeni',\n    'Ndola',\n    'Kitwe',\n    'Solwezi'\n  ],\n  'BNK20203020000000662': [\n    'Head Office',\n    'Northend',\n    'Longacres',\n    'Arcades',\n    'Ndola Centre Branch',\n    'Kitwe',\n    'Makeni',\n    'Mansa Centre Branch',\n    'Mbala Centre Branch',\n    'Mbala Main Branch',\n    'Ndola Main Branch',\n    'City Mall Branch - Solwezi',\n    'Solwezi Main Branch'\n  ],\n\n  // Atlas Mara Bank\n  'BNK20200430000000007': [\n    'Lusaka'\n  ],\n\n  // Bank of China\n  'BNK20200430000000008': [\n    'Lusaka',\n    'Kitwe'\n  ],\n\n  // ABSA Bank\n  'BNK20200440000000035': [\n    'Head Office',\n    'Head Office - Elunda',\n    'Lusaka - Kamwala',\n    'Lusaka - Northend',\n    'Lusaka - Matero',\n    'Lusaka Business Centre',\n    'Lusaka Longacres',\n    'Chilenje',\n    'Lusaka Industrial',\n    'University of Zambia Lusaka',\n    'Soweto',\n    'Chelstone',\n    'Kabwata',\n    'Lusaka - Chawama',\n    'Manda Hill',\n    'Lusaka Operation Processing Centre',\n    'Kabelenga',\n    'Elunda Premium Banking Centre',\n    'Ndola Business Centre',\n    'Ndola Operations Processing Centre',\n    'Ndola - Masala',\n    'Kitwe Business Centre',\n    'Kitwe Chimwemwe',\n    'Kitwe Parklands Center',\n    'Kitwe Operations Processing Centre',\n    'Chingola & Prestige',\n    'Chililabombwe',\n    'Mufulira & Prestige',\n    'Kalulushi',\n    'Luanshya',\n    'Kasama',\n    'Kabwe & Prestige',\n    'Livingstone',\n    'Chipata',\n    'Choma',\n    'Mbala',\n    'Nakonde',\n    'Mpika',\n    'Mansa',\n    'Mkushi',\n    'Kapiri Mposhi',\n    'Lundazi',\n    'Mfuwe',\n    'Solwezi',\n    'Mongu',\n    'Kafue',\n    'Chirundu',\n    'Mazabuka',\n    'Monze',\n    'Kalomo',\n    'Petauke',\n    'Chongwe',\n    'Katete',\n    'Chambishi',\n    'Mumbwa',\n    'Levy'\n  ],\n  'BNK20200830000000616': [\n    'Petauke Branch',\n    'Manda Hill Branch',\n    'Matero Branch',\n    'Mkushi Branch',\n    'Mbala Branch Zambia',\n    'Longacres Prestige Branch',\n    'Lusaka Corporate Service Centre Branch',\n    'Mansa Branch'\n  ],\n\n  // Cavmont Bank\n  'BNK20200440000000036': [\n    'Head Office',\n    'Lusaka Square',\n    'Lusaka South End',\n    'Kalingalinga',\n    'Tazara',\n    'Garden',\n    'Makumbi',\n    'Bread of Life',\n    'Ndola',\n    'Kitwe'\n  ],\n\n  // Citibank Zambia\n  'BNK20200450000000043': [\n    'Lusaka'\n  ],\n\n  // Ecobank\n  'BNK20200450000000044': [\n    'Lusaka'\n  ],\n\n  // First Alliance Bank\n  'BNK20200450000000046': [\n    'Lusaka'\n  ],\n\n  // First Capital Bank\n  'BNK20200450000000049': [\n    'Lusaka'\n  ],\n\n  // First National Bank - Most comprehensive branch network\n  'BNK20200480000000053': [\n    'Commercial Suite',\n    'Industrial',\n    'FNB Operation Centre',\n    'Head Office',\n    'Electronic Banking',\n    'Treasury',\n    'Manda Hill',\n    'Vehicle and Asset Finance',\n    'Makeni Mall',\n    'Home Loan',\n    'Branchless Banking',\n    'Electronic Wallet',\n    'CIB Corporate',\n    'Premier Banking',\n    'Agriculture Centre',\n    'Corporate Investment Banking',\n    'Chilenje',\n    'Cash Centre',\n    'PHI Branch',\n    'Cairo',\n    'Kabulonga',\n    'Ndola',\n    'Jacaranda Mall',\n    'Kitwe',\n    'Mukuba Mall',\n    'Kitwe Industrial',\n    'Chingola',\n    'Mufulira',\n    'Luanshya',\n    'Kabwe',\n    'Livingstone',\n    'Chipata',\n    'Choma',\n    'Mkushi',\n    'Solwezi',\n    'Kalumbila',\n    'Mazabuka'\n  ],\n  'FNB': [\n    'Commercial Suite',\n    'Industrial',\n    'FNB Operation Centre',\n    'Head Office',\n    'Electronic Banking',\n    'Treasury',\n    'Manda Hill',\n    'Vehicle and Asset Finance',\n    'Makeni Mall',\n    'Home Loan',\n    'Branchless Banking',\n    'Electronic Wallet',\n    'CIB Corporate',\n    'Premier Banking',\n    'Agriculture Centre',\n    'Corporate Investment Banking',\n    'Chilenje',\n    'Cash Centre',\n    'PHI Branch',\n    'Cairo',\n    'Kabulonga',\n    'Ndola',\n    'Jacaranda Mall',\n    'Kitwe',\n    'Mukuba Mall',\n    'Kitwe Industrial',\n    'Chingola',\n    'Mufulira',\n    'Luanshya',\n    'Kabwe',\n    'Livingstone',\n    'Chipata',\n    'Choma',\n    'Mkushi',\n    'Solwezi',\n    'Kalumbila',\n    'Mazabuka'\n  ],\n\n  // Indo Zambia Bank\n  'BNK20200520000000062': [\n    'Lusaka'\n  ],\n\n  // Intermarket Banking Corporation\n  'BNK20200520000000065': [\n    'Lusaka'\n  ],\n\n  // Investrust Bank\n  'BNK20200550000000081': [\n    'Lusaka'\n  ],\n\n  // National Savings and Credit Bank\n  'BNK20200760000000614': [\n    'Cosmopolitan'\n  ],\n\n  // Natsave\n  'BNK20201490000000621': [\n    'Chama',\n    'Chavuma',\n    'Chilubi Island',\n    'Chimwemwe',\n    'Chinsali',\n    'Chipata',\n    'Choma',\n    'Chongwe',\n    'Kabwe',\n    'Kalabo',\n    'Kaputa',\n    'Kasama',\n    'Kasempa',\n    'Kazungula',\n    'Kitwe',\n    'Livingstone',\n    'Luanshya',\n    'Lumwana',\n    'Lufwanyama',\n    'Lukulu',\n    'Credit Centre',\n    'Lusaka Chilenje',\n    'Lusaka Main Branch',\n    'Lusaka Matero',\n    'Lusaka Northend',\n    'Luwingu',\n    'Mansa',\n    'Mongu',\n    'Mpika',\n    'Mporokoso',\n    'Mpongwe',\n    'Mumbwa',\n    'Mwense',\n    'Nchelenge',\n    'Ndola',\n    'Petauke',\n    'Solwezi',\n    'Zambezi',\n    'Head office',\n    'Cosmopolitan'\n  ],\n\n  // New Bank\n  'BNK20200690000000253': [\n    'Lusaka'\n  ],\n\n  // Stanbic Bank Zambia\n  'BNK20200590000000113': [\n    'Lusaka'\n  ],\n  'Stanbic Bank': [\n    'Lusaka'\n  ],\n  'Stanbic': [\n    'Lusaka'\n  ],\n\n  // Standard Chartered Bank Zambia\n  'BNK20200590000000119': [\n    'Lusaka'\n  ],\n  'Standard Chartered': [\n    'Lusaka'\n  ],\n\n  // The United Bank of Zambia\n  'BNK20200590000000120': [\n    'Lusaka'\n  ],\n\n  // United Bank for Africa\n  'BNK20200590000000121': [\n    'Lusaka'\n  ],\n\n  // Zambia Industrial Commercial Bank\n  'BNK20200590000000122': [\n    'Lusaka'\n  ],\n\n  // Zambia National Commercial Bank\n  'BNK20200590000000123': [\n    'Head Office',\n    'Lusaka Main Branch',\n    'Ndola',\n    'Kitwe',\n    'Livingstone',\n    'Kasama',\n    'Chipata'\n  ],\n\n  // Bayport Financial Services\n  'BNK20213160000000663': [\n    'Lusaka Business Centre'\n  ],\n\n  // FAB\n  'BNK20222300000000664': [\n    'Lusaka Main Branch'\n  ]\n} as const satisfies Record<string, readonly string[]>;\n\n// Type-safe bank name type\nexport type BankName = keyof typeof bankBranchMap;\n\n// ============================================================================\n// BRANCH GROUPING BY PROVINCE/REGION\n// ============================================================================\n\n/**\n * Branches grouped by geographic location for better UX.\n * Used for grouped dropdowns and regional filtering.\n * \n * All branches confirmed by Production API (29 total).\n */\nexport const branchGroups = {\n  'Lusaka Province - Head Office': [\n    'Head Office',\n    'Lusaka Corporate Service Centre Branch',\n  ] as const,\n  \n  'Lusaka Province - Retail Branches': [\n    'Lusaka Square',\n    'Lusaka South End',\n    'Kalingalinga',\n    'Tazara',\n    'Garden',\n    'Makumbi',\n    'Bread of Life',\n    'Longacres Prestige Branch',\n    'Manda Hill Branch',\n    'Matero Branch',\n  ] as const,\n  \n  'Copperbelt Province': [\n    'Ndola',\n    'Kitwe',\n    'Kitwe Agency',\n    'Chililabombwe',\n    'Chingola',\n  ] as const,\n  \n  'Northern Province': [\n    'Kasama',\n    'Mpulungu',\n    'Mbala',\n    'Mbala Branch Zambia',\n  ] as const,\n  \n  'Luapula Province': [\n    'Mansa',\n    'Mansa Branch',\n    'Mwense',\n  ] as const,\n  \n  'Eastern Province': [\n    'Chipata',\n    'Petauke Branch',\n  ] as const,\n  \n  'North-Western Province': [\n    'Solwezi',\n    'Mufumbwe',\n  ] as const,\n  \n  'Central Province': [\n    'Mkushi Branch',\n  ] as const,\n} as const;\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Get the province/region group for a given branch name\n */\nexport const getBranchGroup = (branchName: string): string | null => {\n  for (const [group, branches] of Object.entries(branchGroups)) {\n    if ((branches as readonly string[]).includes(branchName)) {\n      return group;\n    }\n  }\n  return null;\n};\n\n/**\n * Validate if a branch name is accepted by ALTUS\n */\nexport const isValidBranch = (branchName: string): boolean => {\n  return allValidBranches.includes(branchName as any);\n};\n\n/**\n * Get branches for a specific bank using ALTUS FinancialInstitutionId\n */\nexport const getBranchesForBank = (bankId: string): readonly string[] => {\n  return bankBranchMap[bankId as BankName] || allValidBranches;\n};\n\n/**\n * Get all available bank names\n */\nexport const getAllBankNames = (): string[] => {\n  return Object.keys(bankBranchMap);\n};\n\n/**\n * Search/filter branches by partial match (case-insensitive)\n */\nexport const searchBranches = (query: string, bankName?: string): string[] => {\n  const branches = bankName ? getBranchesForBank(bankName) : allValidBranches;\n  const lowerQuery = query.toLowerCase();\n  return branches.filter(branch => \n    branch.toLowerCase().includes(lowerQuery)\n  );\n};\n\n/**\n * Check if a bank is FNB using ALTUS FinancialInstitutionId\n */\nexport const isFNBBank = (bankId: string): boolean => {\n  return bankId === 'BNK20200480000000053'; // FNB ALTUS ID\n};\n\n/**\n * Get validation warning for non-FNB banks using ALTUS ID\n */\nexport const getNonFNBWarning = (bankId: string): string | null => {\n  if (isFNBBank(bankId)) {\n    return null;\n  }\n  return ` Warning: Only FNB branches are fully validated by ALTUS API. Other banks may cause validation errors. We recommend using FNB for guaranteed approval.`;\n};\n\n/**\n * Validate bank and branch combination\n */\nexport const validateBankBranch = (bankName: string, branchName: string): {\n  isValid: boolean;\n  error?: string;\n  warning?: string;\n} => {\n  // Check if branch is in the valid list\n  if (!isValidBranch(branchName)) {\n    return {\n      isValid: false,\n      error: `Invalid branch: \"${branchName}\". Must be one of the 29 ALTUS-approved branches.`\n    };\n  }\n\n  // Check if it's a non-FNB bank\n  const warning = getNonFNBWarning(bankName);\n  \n  return {\n    isValid: true,\n    warning: warning || undefined\n  };\n};\n\n// ============================================================================\n// EXPORT SUMMARY\n// ============================================================================\n\nexport default {\n  allValidBranches,\n  bankBranchMap,\n  branchGroups,\n  getBranchGroup,\n  isValidBranch,\n  getBranchesForBank,\n  getAllBankNames,\n  searchBranches,\n  isFNBBank,\n  getNonFNBWarning,\n  validateBankBranch,\n};\n"],"names":["getLinearProgressUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","indeterminate1Keyframe","keyframes","_taggedTemplateLiteral","indeterminate1Animation","css","indeterminate2Keyframe","indeterminate2Animation","bufferKeyframe","bufferAnimation","getColorShade","theme","color","vars","palette","LinearProgress","concat","mode","lighten","main","darken","LinearProgressRoot","styled","name","overridesResolver","props","styles","ownerState","root","capitalize","variant","memoTheme","_ref","position","overflow","display","height","zIndex","colorAdjust","variants","Object","entries","filter","createSimplePaletteValueFilter","map","_ref2","style","backgroundColor","_ref3","content","left","top","right","bottom","opacity","transform","LinearProgressDashed","dashed","_ref4","marginTop","width","backgroundSize","backgroundPosition","backgroundImage","_ref5","animation","LinearProgressBar1","bar","bar1","bar1Indeterminate","bar1Determinate","bar1Buffer","_ref6","transition","transformOrigin","_ref7","_ref8","_ref9","LinearProgressBar2","bar2","bar2Indeterminate","bar2Buffer","_ref0","_ref1","_ref10","_ref11","_ref12","_ref13","_ref14","React","inProps","ref","useDefaultProps","className","value","valueBuffer","other","_objectWithoutProperties","_objectSpread","classes","slots","composeClasses","useUtilityClasses","isRtl","useRtl","rootProps","inlineStyles","undefined","Math","round","process","_jsxs","clsx","role","children","_jsx","createSvgIcon","d","useUATWorkflow","_state$currentCustome2","customer","loan","setLoan","useWizardData","state","useAltus","submitLoanApplication","useCallback","async","_state$currentCustome","_customer$reference","_customer$reference2","_customer$reference3","_customer$reference4","_customer$reference5","_customer$nextOfKin","_customer$nextOfKin2","_customer$nextOfKin3","_customer$nextOfKin4","_customer$nextOfKin5","_customer$nextOfKin6","_loanResult$outParams","console","log","customerId","currentCustomer","firstName","lastName","Error","nrc","phone","email","amount","loanRequestData","TypeOfCustomer","middleName","dateOfBirth","identityNo","contactNo","emailId","primaryAddress","address","provinceName","province","replace","districtName","city","countryName","postalcode","postalCode","employeeNumber","payrollNumber","employerId","designation","occupation","employerName","employmentType","tenure","tenureMonths","loanAmount","grossIncome","salary","netIncome","deductions","gender","financialInstitutionName","bankName","financialInstitutionBranchName","_customer$bankBranch","providedBranch","bankBranch","trim","isValid","isValidBranchName","matchedBranch","getBranchByPartialMatch","defaultBranch","getDefaultBranchForProvince","accountNumber","accountType","referrerName","reference","referrerNRC","referrerContactNo","referrerPhysicalAddress","referrerRelationType","relationship","kinName","nextOfKin","kinNRC","kinRelationship","kinMobileNo","kinAddress","kinProvinceName","kinDistrictName","kinCountryName","hasPersonalDetails","hasAddressDetails","hasBankDetails","hasNextOfKin","hasReference","isValidBranch","errorMessage","error","allValidBranches","slice","join","loanResult","altusApi","executionStatus","outParams","ApplicationNumber","executionMessage","applicationNumber","applicationId","uploadDocument","documentType","file","_result$outParams","fileName","result","LRDocumentDetailsId","isCustomerReady","ALLOWED_MIME","preValidateFile","includes","type","ok","size","checksum","buf","arrayBuffer","digest","crypto","subtle","Array","from","Uint8Array","b","toString","padStart","computeSha256","meta","mimeType","sizeBytes","NRC_REGEX","docTypes","label","accept","helper","optional","DocumentsStep","documents","addOrReplaceDocument","removeDocument","push","useSnackbar","fileInputs","useRef","documentsRef","activeIntervalsRef","applicationNumberRef","pendingDocumentsRef","Map","useEffect","current","forEach","id","clearInterval","uploadToAPI","doc","status","progress","documentTypeCode","response","delete","uploadError","_uploadError$message","_uploadError$details","_uploadError$details$","message","details","reader","FileReader","onloadend","base64","set","typeCode","newCount","setPendingCount","readAsDataURL","Date","now","onSelect","e","_e$target$files","_pre$meta3","_pre$meta4","_pre$meta5","target","files","clientNRC","sanitizedNRC","String","documentName","docType","docConfig","find","getDocumentDisplayName","fileExtension","filename","lastDot","lastIndexOf","substring","getFileExtension","newFileName","renamedFile","File","pre","_pre$meta2","_pre$meta","checksumSha256","previewUrl","startsWith","URL","createObjectURL","start","sizeFactor","min","max","interval","window","setInterval","elapsed","pct","_ocr","_pre$meta6","_pre$meta7","_pre$meta8","_ocr2","ocr","warn","worker","createWorker","url","img","Image","Promise","resolve","reject","onload","onerror","src","revokeObjectURL","data","race","recognize","_","setTimeout","fullText","text","snippet","match","detectedNrc","terminate","terminateError","attemptOcr","ocrError","notes","customerNrc","length","normalizeNrc","toLowerCase","detectedNormalized","customerNormalized","isMatch","detected","verifiedDoc","extractedTextSnippet","verificationNotes","checkAndMergePayslips","payslip1","payslip2","payslip3","mergedFile","pdf","jsPDF","pageAdded","addFileToPDF","pageNumber","_e$target","addPage","setFontSize","canvas","document","createElement","ctx","getContext","pageWidth","pageHeight","imgRatio","pdfWidth","pdfHeight","maxWidth","maxHeight","canvasWidth","canvasHeight","scale","floor","drawImage","dataUrl","toDataURL","addImage","readAsArrayBuffer","toLocaleString","pdfBlob","output","mergePayslips","mergedDoc","checkAndMergeNRC","nrcFront","nrcBack","addImageToPDF","pageLabel","imgData","setTextColor","err","timestamp","mergeNRCImages","docsByType","t","openPicker","input","click","__documentsStepValidate","_nrcDoc$verificationN","missing","r","some","p","_docsByType","nrcDoc","retryPendingUploads","pendingArray","remaining","requiredArr","requiredVerified","_docsByType2","payslipDocs","useMemo","cfg","payslipsVerified","_p$doc","selfieDoc","overallPct","pendingCount","count","Box","Typography","gutterBottom","Alert","severity","sx","mb","border","borderColor","boxShadow","action","Button","onClick","whiteSpace","fontWeight","bgcolor","fontSize","mt","margin","paddingLeft","borderRadius","background","Stack","direction","xs","sm","spacing","alignItems","flex","_existing$verificatio","_existing$file","_existing$checksumSha","existing","isSelfie","mismatchWarning","Chip","flexWrap","alt","objectFit","StatusChip","Tooltip","title","ml","el","onChange","startIcon","UploadFileIcon","IconButton","DeleteIcon","Divider","_doc$file","_doc$checksumSha","_combinedDoc$file","combinedDoc","_combinedDoc$file2","pending","uploading","uploaded","verifying","verified","bankBranchMap","branchGroups","getBranchGroup","branchName","group","branches","getBranchesForBank","bankId"],"sourceRoot":""}