{"version":3,"file":"static/js/408.378d29bd.chunk.js","mappings":"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","sources":["utils/loanCalculator.ts"],"sourcesContent":["// Reusable local loan calculation utility mirroring the hero quick estimate logic.\n// Updated rates and product structure based on new business requirements.\n\nexport type LocalLoanInstallment = {\n  month: number;\n  openingBalance: number;\n  interestPortion: number;\n  principalPortion: number;\n  installment: number;\n  closingBalance: number;\n};\n\nexport type LocalLoanEstimate = {\n  monthlyInstallment: number;\n  totalInterest: number;\n  totalPayable: number;\n  monthlyRate: number; // raw monthly rate used\n  schedule: LocalLoanInstallment[];\n};\n\nexport type LoanTypeKey = 'instant-salary-advance' | 'corporate-payroll' | 'government-personal' | 'zambia-army' | 'zambia-airforce';\n\n// Product definitions with tenure limits and interest rate structures\nexport const LOAN_PRODUCTS = {\n  'instant-salary-advance': {\n    name: 'Instant Salary Advances',\n    maxTenureMonths: 3,\n    rateStructure: [\n      { minAmount: 500, maxAmount: 900, monthlyRate: 0.30 }, // 30% monthly\n      { minAmount: 1000, maxAmount: 2500, monthlyRate: 0.25 }, // 25% monthly  \n      { minAmount: 3000, maxAmount: 5000, monthlyRate: 0.18 } // 18% monthly\n    ]\n  },\n  'corporate-payroll': {\n    name: 'Corporate Payroll',\n    maxTenureMonths: 24,\n    rateStructure: [\n      { minAmount: 0, maxAmount: Number.MAX_SAFE_INTEGER, monthlyRate: 0.05 } // 5% monthly for all amounts\n    ]\n  },\n  'government-personal': {\n    name: 'Government Personal Loans',\n    maxTenureMonths: 60,\n    rateStructure: [\n      { minAmount: 0, maxAmount: 14999, monthlyRate: 0.05 }, // 5% monthly below 15000\n      { minAmount: 15000, maxAmount: Number.MAX_SAFE_INTEGER, monthlyRate: 0.045 } // 4.5% monthly above 15000\n    ]\n  },\n  'zambia-army': {\n    name: 'Zambia Army Loans',\n    maxTenureMonths: 60,\n    rateStructure: [\n      { minAmount: 0, maxAmount: 14999, monthlyRate: 0.05 }, // 5% monthly below 15000\n      { minAmount: 15000, maxAmount: Number.MAX_SAFE_INTEGER, monthlyRate: 0.045 } // 4.5% monthly above 15000\n    ]\n  },\n  'zambia-airforce': {\n    name: 'Zambia Airforce Loans',\n    maxTenureMonths: 60,\n    rateStructure: [\n      { minAmount: 0, maxAmount: 14999, monthlyRate: 0.05 }, // 5% monthly below 15000\n      { minAmount: 15000, maxAmount: Number.MAX_SAFE_INTEGER, monthlyRate: 0.045 } // 4.5% monthly above 15000\n    ]\n  }\n};\n\n// Get the appropriate monthly rate for a loan amount and product type\nfunction getMonthlyRate(amount: number, loanType: LoanTypeKey): number {\n  const product = LOAN_PRODUCTS[loanType];\n  const applicableRate = product.rateStructure.find(tier => \n    amount >= tier.minAmount && amount <= tier.maxAmount\n  );\n  \n  if (!applicableRate) {\n    throw new Error(`No rate structure found for amount ${amount} in product ${loanType}`);\n  }\n  \n  return applicableRate.monthlyRate;\n}\n\n// Get maximum tenure for a product type\nexport function getMaxTenure(loanType: LoanTypeKey): number {\n  return LOAN_PRODUCTS[loanType].maxTenureMonths;\n}\n\n// Validate if amount is within allowed range for the product\nexport function validateLoanAmount(amount: number, loanType: LoanTypeKey): { valid: boolean; message?: string } {\n  // For instant salary advances, check specific amount ranges\n  if (loanType === 'instant-salary-advance') {\n    if (amount < 500) {\n      return { valid: false, message: 'Minimum amount for Instant Salary Advances is K500' };\n    }\n    if (amount > 5000) {\n      return { valid: false, message: 'Maximum amount for Instant Salary Advances is K5000' };\n    }\n  }\n  \n  return { valid: true };\n}\n\n// Get all available loan products for UI display\nexport function getLoanProducts(): Array<{ key: LoanTypeKey; name: string; maxTenure: number }> {\n  return Object.entries(LOAN_PRODUCTS).map(([key, product]) => ({\n    key: key as LoanTypeKey,\n    name: product.name,\n    maxTenure: product.maxTenureMonths\n  }));\n}\n\nexport interface CalcInput {\n  principal: number; // amount\n  tenureMonths: number;\n  loanType?: LoanTypeKey; // optional; default instant-salary-advance\n}\n\n// Simple declining balance schedule: interest each month = current balance * rate; principal = installment - interest.\n// Installment derived from linear interest approximation used earlier for UI parity.\nexport function computeLocalLoanEstimate({ principal, tenureMonths, loanType = 'instant-salary-advance' }: CalcInput): LocalLoanEstimate {\n  if (principal <= 0 || tenureMonths <= 0) {\n    throw new Error('Principal and tenure must be positive');\n  }\n  \n  // Validate loan amount for the product type\n  const amountValidation = validateLoanAmount(principal, loanType);\n  if (!amountValidation.valid) {\n    throw new Error(amountValidation.message);\n  }\n  \n  // Validate tenure for the product type\n  const maxTenure = getMaxTenure(loanType);\n  if (tenureMonths > maxTenure) {\n    throw new Error(`Maximum tenure for ${LOAN_PRODUCTS[loanType].name} is ${maxTenure} months`);\n  }\n  \n  const rate = getMonthlyRate(principal, loanType);\n  const totalPayable = Math.round(principal * (1 + rate * tenureMonths));\n  const monthlyInstallment = Math.round(totalPayable / tenureMonths);\n  const schedule: LocalLoanInstallment[] = [];\n  let balance = principal;\n  let totalInterest = 0;\n  for (let m=1; m<=tenureMonths; m++) {\n    const opening = balance;\n    const interest = Math.round(opening * rate);\n    let principalPortion = monthlyInstallment - interest;\n    if (principalPortion > balance) principalPortion = balance; // final adjustment\n    const closing = opening - principalPortion;\n    totalInterest += interest;\n    schedule.push({\n      month: m,\n      openingBalance: opening,\n      interestPortion: interest,\n      principalPortion,\n      installment: interest + principalPortion,\n      closingBalance: closing < 1 ? 0 : closing\n    });\n    balance = closing;\n  }\n  const totalPayableAdj = principal + totalInterest;\n  return { monthlyInstallment, totalInterest, totalPayable: totalPayableAdj, monthlyRate: rate, schedule };\n}\n"],"names":["LOAN_PRODUCTS","name","maxTenureMonths","rateStructure","minAmount","maxAmount","monthlyRate","Number","MAX_SAFE_INTEGER","getMaxTenure","loanType","getLoanProducts","Object","entries","map","_ref","key","product","maxTenure","computeLocalLoanEstimate","_ref2","principal","tenureMonths","Error","amountValidation","amount","valid","message","validateLoanAmount","concat","rate","applicableRate","find","tier","getMonthlyRate","totalPayable","Math","round","monthlyInstallment","schedule","balance","totalInterest","m","opening","interest","principalPortion","closing","push","month","openingBalance","interestPortion","installment","closingBalance"],"sourceRoot":""}