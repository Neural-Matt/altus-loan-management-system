"use strict";(self.webpackChunkaltus_loan_application_portal=self.webpackChunkaltus_loan_application_portal||[]).push([[439],{624:(e,a,n)=>{n.d(a,{i:()=>i,y:()=>l});var t=n(5849);const r=t.YjP().optional().refine(e=>!e||/.+@.+\..+/.test(e),{message:"Invalid email"}),o=t.YjP().min(9,{message:"Phone required"}),l=t.Ikc({firstName:t.YjP().min(2,{message:"First name required"}),lastName:t.YjP().min(2,{message:"Last name required"}),phone:o,email:r,address:t.YjP().optional(),nrc:t.YjP().min(5,{message:"NRC required"}),purpose:t.YjP().optional(),gender:t.YjP().optional(),nationality:t.YjP().optional(),otherNationality:t.YjP().optional(),occupation:t.YjP().optional(),maritalStatus:t.YjP().optional(),accommodationType:t.YjP().optional(),employerName:t.YjP().optional(),payrollNumber:t.YjP().optional(),nextOfKin:t.Ikc({firstName:t.YjP().optional(),lastName:t.YjP().optional(),phone:o.optional(),email:r,address:t.YjP().optional(),nrc:t.YjP().optional(),nationality:t.YjP().optional(),relationship:t.YjP().optional()}).optional(),reference:t.Ikc({name:t.YjP().optional(),phone:o.optional(),email:r,address:t.YjP().optional()}).optional()}),i=t.Ikc({amount:t.auy.number().min(100,{message:"Min 100"}),tenureMonths:t.auy.number().min(1,{message:"Tenure required"}).max(60,{message:"Max 60 months"})})},4439:(e,a,n)=>{n.d(a,{CustomerStep:()=>q});var t=n(5043),r=n(4858),o=n(1850),l=n(624),i=n(4799),s=n(298),c=n(2579),d=n(5895),m=n(9e3),u=n(3969),p=n(45),h=n(9379),x=n(8387),j=n(1807),v=n(2466),g=n(8128),y=n(1612),b=n(8301),f=n(9066),A=n(9699),N=n(4418),Y=n(8348),C=n(4171),P=n(9857);const O=(0,P.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var S=n(1977),w=n(6061);function M(e){return(0,w.Ay)("MuiMenuItem",e)}const T=(0,P.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var I=n(579);const k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],E=(0,g.Ay)(A.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,n.dense&&a.dense,n.divider&&a.divider,!n.disableGutters&&a.gutters]}})((0,y.A)(e=>{let{theme:a}=e;return(0,h.A)((0,h.A)({},a.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(T.selected)]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,(a.vars||a).palette.action.selectedOpacity),["&.".concat(T.focusVisible)]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,"".concat((a.vars||a).palette.action.selectedOpacity," + ").concat((a.vars||a).palette.action.focusOpacity))}},["&.".concat(T.selected,":hover")]:{backgroundColor:a.alpha((a.vars||a).palette.primary.main,"".concat((a.vars||a).palette.action.selectedOpacity," + ").concat((a.vars||a).palette.action.hoverOpacity)),"@media (hover: none)":{backgroundColor:a.alpha((a.vars||a).palette.primary.main,(a.vars||a).palette.action.selectedOpacity)}},["&.".concat(T.focusVisible)]:{backgroundColor:(a.vars||a).palette.action.focus},["&.".concat(T.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity},["& + .".concat(C.A.root)]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},["& + .".concat(C.A.inset)]:{marginLeft:52},["& .".concat(S.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(S.A.inset)]:{paddingLeft:36},["& .".concat(O.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:a}=e;return!a.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:a}=e;return a.divider},style:{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:a}=e;return!a.dense},style:{[a.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:a}=e;return a.dense},style:(0,h.A)((0,h.A)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2),{},{["& .".concat(O.root," svg")]:{fontSize:"1.25rem"}})}]})})),F=t.forwardRef(function(e,a){const n=(0,b.b)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:o="li",dense:l=!1,divider:i=!1,disableGutters:s=!1,focusVisibleClassName:c,role:d="menuitem",tabIndex:m,className:u}=n,v=(0,p.A)(n,k),g=t.useContext(f.A),y=t.useMemo(()=>({dense:l||g.dense||!1,disableGutters:s}),[g.dense,l,s]),A=t.useRef(null);(0,N.A)(()=>{r&&A.current&&A.current.focus()},[r]);const C=(0,h.A)((0,h.A)({},n),{},{dense:y.dense,divider:i,disableGutters:s}),P=(e=>{const{disabled:a,dense:n,divider:t,disableGutters:r,selected:o,classes:l}=e,i={root:["root",n&&"dense",a&&"disabled",!r&&"gutters",t&&"divider",o&&"selected"]},s=(0,j.A)(i,M,l);return(0,h.A)((0,h.A)({},l),s)})(n),O=(0,Y.A)(A,a);let S;return n.disabled||(S=void 0!==m?m:-1),(0,I.jsx)(f.A.Provider,{value:y,children:(0,I.jsx)(E,(0,h.A)((0,h.A)({ref:O,role:d,tabIndex:S,component:o,focusVisibleClassName:(0,x.A)(P.focusVisible,c),className:(0,x.A)(P.root,u)},v),{},{ownerState:C,classes:P}))})});var K=n(8555),L=n(2324);const R=["name","control"],H=e=>{const a=e.replace(/\D/g,"").substring(0,9);return a.length<=6?a:a.length<=8?"".concat(a.substring(0,6),"/").concat(a.substring(6)):"".concat(a.substring(0,6),"/").concat(a.substring(6,8),"/").concat(a.substring(8))},B=e=>{let{name:a,control:n}=e,t=(0,p.A)(e,R);return(0,I.jsx)(r.xI,{name:a,control:n,render:e=>{var a;let{field:n,fieldState:r}=e;return(0,I.jsx)(L.A,(0,h.A)((0,h.A)({},t),{},{fullWidth:!0,error:!!r.error,helperText:null===(a=r.error)||void 0===a?void 0:a.message,value:H(n.value||""),onChange:e=>{const a=H(e.target.value);n.onChange(a)},placeholder:"XXXXXX/XX/X",inputProps:{maxLength:11}}))}})};var D=n(3267),G=n(3482),V=n(4332),X=n(5272);const q=()=>{const{customer:e,setCustomer:a}=(0,D.l)(),{createRetailCustomer:n}=(0,G.Dy)(),{push:p}=(0,V.d)(),[h,x]=t.useState(!0),[j,v]=t.useState(!1),{control:g,handleSubmit:y,reset:b,watch:f}=(0,r.mN)({defaultValues:{firstName:e.firstName||"",lastName:e.lastName||"",phone:e.phone||"",email:e.email||"",address:e.address||"",nrc:e.nrc||"",purpose:e.purpose||"",gender:e.gender||"",nationality:e.nationality||"",otherNationality:e.otherNationality||"",occupation:e.occupation||"",maritalStatus:e.maritalStatus||"",accommodationType:e.accommodationType||"",employerName:e.employerName||"",payrollNumber:e.payrollNumber||"",nextOfKin:e.nextOfKin||{},reference:e.reference||{}},resolver:(0,o.u)(l.y),mode:"onBlur"}),A=f("nationality");(0,t.useEffect)(()=>{b({firstName:e.firstName||"",lastName:e.lastName||"",phone:e.phone||"",email:e.email||"",address:e.address||"",nrc:e.nrc||"",purpose:e.purpose||"",gender:e.gender||"",nationality:e.nationality||"",otherNationality:e.otherNationality||"",occupation:e.occupation||"",maritalStatus:e.maritalStatus||"",accommodationType:e.accommodationType||"",employerName:e.employerName||"",payrollNumber:e.payrollNumber||"",nextOfKin:e.nextOfKin||{},reference:e.reference||{}})},[e,b]);window.__customerStepSubmit=y(async e=>{try{var t,r,o,l,i;a(e);const s={firstName:e.firstName,lastName:e.lastName,nrc:e.nrc,phoneNumber:e.phone,emailAddress:e.email,dateOfBirth:"1990-01-01",gender:e.gender,nationality:"Other"===e.nationality?e.otherNationality||"":e.nationality||"",otherNationality:"Other"===e.nationality?e.otherNationality:void 0,maritalStatus:e.maritalStatus||"",address:{street:e.address||"",city:"Lusaka",province:"Lusaka",country:"Zambia"},employment:{employerId:"EMP001",employerName:e.employerName||"",employerCode:e.payrollNumber||"",position:e.occupation||"",salary:0,employmentDate:"2020-01-01",employmentType:"Permanent"},nextOfKin:{firstName:(null===(t=e.nextOfKin)||void 0===t?void 0:t.firstName)||"",lastName:(null===(r=e.nextOfKin)||void 0===r?void 0:r.lastName)||"",relationship:(null===(o=e.nextOfKin)||void 0===o?void 0:o.relationship)||"",phoneNumber:(null===(l=e.nextOfKin)||void 0===l?void 0:l.phone)||"",address:null===(i=e.nextOfKin)||void 0===i?void 0:i.address}};await n(s),p("Customer details saved successfully!","success")}catch(s){throw console.error("Error creating customer:",s),p("Failed to save customer details. Please try again.","error"),s}},()=>!1);const N=e=>{let{title:a,subtitle:n,toggle:t,open:r=!0,onToggle:o,children:l}=e;return(0,I.jsxs)(i.A,{elevation:0,sx:{p:2.5,border:"1px solid",borderColor:"divider",borderRadius:3},children:[(0,I.jsxs)(s.A,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[t&&(0,I.jsx)(c.A,{size:"small",onClick:o,"aria-label":r?"Collapse section":"Expand section",sx:{transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform .25s"},children:(0,I.jsx)(X.A,{})}),(0,I.jsx)(d.A,{variant:"subtitle2",sx:{fontWeight:600},children:a}),n&&(0,I.jsx)(d.A,{variant:"caption",sx:{color:"text.secondary"},children:n})]}),(0,I.jsx)(m.A,{in:r,unmountOnExit:!0,timeout:"auto",children:l})]})};return(0,I.jsxs)(u.A,{children:[(0,I.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Applicant Information"}),(0,I.jsxs)(s.A,{spacing:2.5,children:[(0,I.jsx)(N,{title:"Personal Details",subtitle:"Core applicant information",children:(0,I.jsxs)(u.A,{sx:{display:"grid",gap:2,gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"}},children:[(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"firstName",control:g,label:"First Name"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"lastName",control:g,label:"Last Name"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"phone",control:g,label:"Phone Number"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"email",control:g,label:"Email"})}),(0,I.jsx)(u.A,{sx:{gridColumn:"1 / -1"},children:(0,I.jsx)(K.Y,{name:"address",control:g,label:"Residential Address"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(B,{name:"nrc",control:g,label:"NRC"})}),(0,I.jsx)(u.A,{children:(0,I.jsxs)(K.Y,{name:"purpose",control:g,label:"Purpose of Loan",select:!0,children:[(0,I.jsx)(F,{value:"Grow Business",children:"Grow Business"}),(0,I.jsx)(F,{value:"Personal Use",children:"Personal Use"}),(0,I.jsx)(F,{value:"Housing",children:"Housing"}),(0,I.jsx)(F,{value:"Medication",children:"Medication"}),(0,I.jsx)(F,{value:"Farming",children:"Farming"}),(0,I.jsx)(F,{value:"Start/Grow business",children:"Start/Grow business"}),(0,I.jsx)(F,{value:"Education",children:"Education"}),(0,I.jsx)(F,{value:"Home improvement",children:"Home improvement"}),(0,I.jsx)(F,{value:"Building/Purchase home",children:"Building/Purchase home"}),(0,I.jsx)(F,{value:"Medical expenses",children:"Medical expenses"}),(0,I.jsx)(F,{value:"Agricultural inputs/Equipment",children:"Agricultural inputs/Equipment"}),(0,I.jsx)(F,{value:"Furniture/Home appliances",children:"Furniture/Home appliances"}),(0,I.jsx)(F,{value:"Television/Sound system",children:"Television/Sound system"}),(0,I.jsx)(F,{value:"Mobile phone",children:"Mobile phone"}),(0,I.jsx)(F,{value:"Laptop/Tablet",children:"Laptop/Tablet"}),(0,I.jsx)(F,{value:"Renewable energy/Energy efficiency products",children:"Renewable energy/Energy efficiency products"}),(0,I.jsx)(F,{value:"Env recycling treatments/operations",children:"Env recycling treatments/operations"}),(0,I.jsx)(F,{value:"Vehicle/Import duty/Maintenance",children:"Vehicle/Import duty/Maintenance"}),(0,I.jsx)(F,{value:"School Fees",children:"School Fees"}),(0,I.jsx)(F,{value:"Debt consolidation",children:"Debt consolidation"}),(0,I.jsx)(F,{value:"Funeral",children:"Funeral"}),(0,I.jsx)(F,{value:"Land purchase",children:"Land purchase"})]})}),(0,I.jsx)(u.A,{sx:{gridColumn:{xs:"1 / -1",sm:"auto"}},children:(0,I.jsxs)(K.Y,{name:"gender",control:g,label:"Gender",select:!0,children:[(0,I.jsx)(F,{value:"Male",children:"Male"}),(0,I.jsx)(F,{value:"Female",children:"Female"})]})}),(0,I.jsx)(u.A,{sx:{gridColumn:{xs:"1 / -1",sm:"auto"}},children:(0,I.jsxs)(K.Y,{name:"nationality",control:g,label:"Nationality",select:!0,children:[(0,I.jsx)(F,{value:"Zambian",children:"Zambian"}),(0,I.jsx)(F,{value:"Other",children:"Other"})]})}),"Other"===A&&(0,I.jsx)(u.A,{sx:{gridColumn:{xs:"1 / -1",sm:"auto"}},children:(0,I.jsx)(K.Y,{name:"otherNationality",control:g,label:"Specify Nationality",placeholder:"Enter your nationality"})}),(0,I.jsx)(u.A,{sx:{gridColumn:{xs:"1 / -1",sm:"auto"}},children:(0,I.jsx)(K.Y,{name:"occupation",control:g,label:"Occupation"})}),(0,I.jsx)(u.A,{children:(0,I.jsxs)(K.Y,{name:"maritalStatus",control:g,label:"Marital Status",select:!0,children:[(0,I.jsx)(F,{value:"Single",children:"Single"}),(0,I.jsx)(F,{value:"Married",children:"Married"}),(0,I.jsx)(F,{value:"De facto",children:"De facto"}),(0,I.jsx)(F,{value:"Divorced",children:"Divorced"}),(0,I.jsx)(F,{value:"Widow",children:"Widow"}),(0,I.jsx)(F,{value:"Separated",children:"Separated"}),(0,I.jsx)(F,{value:"Civil Union",children:"Civil Union"})]})}),(0,I.jsx)(u.A,{children:(0,I.jsxs)(K.Y,{name:"accommodationType",control:g,label:"Accommodation Type",select:!0,children:[(0,I.jsx)(F,{value:"Tenant",children:"Tenant"}),(0,I.jsx)(F,{value:"Home Owner",children:"Home Owner"}),(0,I.jsx)(F,{value:"Other",children:"Other"}),(0,I.jsx)(F,{value:"Living in Family Home",children:"Living in Family Home"})]})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"employerName",control:g,label:"Employer"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"payrollNumber",control:g,label:"Employee/MAN Number"})})]})}),(0,I.jsx)(N,{title:"Next of Kin",toggle:!0,open:h,onToggle:()=>x(e=>!e),subtitle:"Emergency contact details",children:(0,I.jsxs)(u.A,{sx:{display:"grid",gap:2,gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"}},children:[(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.firstName",control:g,label:"First Name"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.lastName",control:g,label:"Last Name"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.phone",control:g,label:"Phone Number"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.email",control:g,label:"Email"})}),(0,I.jsx)(u.A,{sx:{gridColumn:"1 / -1"},children:(0,I.jsx)(K.Y,{name:"nextOfKin.address",control:g,label:"Address"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(B,{name:"nextOfKin.nrc",control:g,label:"NRC"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.nationality",control:g,label:"Nationality"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"nextOfKin.relationship",control:g,label:"Relationship"})})]})}),(0,I.jsx)(N,{title:"Reference",toggle:!0,open:j,onToggle:()=>v(e=>!e),subtitle:"Professional or character reference",children:(0,I.jsxs)(u.A,{sx:{display:"grid",gap:2,gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"}},children:[(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"reference.name",control:g,label:"Name"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"reference.phone",control:g,label:"Phone"})}),(0,I.jsx)(u.A,{children:(0,I.jsx)(K.Y,{name:"reference.email",control:g,label:"Email"})}),(0,I.jsx)(u.A,{sx:{gridColumn:"1 / -1"},children:(0,I.jsx)(K.Y,{name:"reference.address",control:g,label:"Address"})})]})})]}),(0,I.jsx)(d.A,{variant:"caption",sx:{mt:2,display:"block",color:"text.secondary"},children:"Only required fields will be validated; others are optional for now."})]})}},8555:(e,a,n)=>{n.d(a,{Y:()=>c});var t=n(9379),r=n(45),o=(n(5043),n(2324)),l=n(4858),i=n(579);const s=["name","control"],c=e=>{let{name:a,control:n}=e,c=(0,r.A)(e,s);return(0,i.jsx)(l.xI,{name:a,control:n,render:e=>{var a;let{field:n,fieldState:r}=e;return(0,i.jsx)(o.A,(0,t.A)((0,t.A)((0,t.A)({},n),c),{},{fullWidth:!0,error:!!r.error,helperText:null===(a=r.error)||void 0===a?void 0:a.message}))}})}}}]);
//# sourceMappingURL=439.f2848f4a.chunk.js.map